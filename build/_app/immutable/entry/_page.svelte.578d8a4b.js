import{S as Ae,i as De,s as Se,k as E,a as le,q as L,l as N,m as T,h as S,c as ae,r as V,n as w,b as je,G as g,J as we,K as X,u as pe,H as me,L as Ne,M as Pe,o as Te,N as We,t as Oe,w as ve,y as Me,z as $e,A as ze,g as Be,d as Ke,B as Le}from"../chunks/index.17bb44e0.js";const ke="persephone.fs.v1";function Ve(){try{localStorage.removeItem(ke)}catch{}}function de(){return Date.now()}function x(t,n=[]){const r=de();return{name:t,type:"dir",children:n,createdAt:r,updatedAt:r}}function b(t,n=""){const r=de();return{name:t,type:"file",content:n,createdAt:r,updatedAt:r}}function Ce(t){return JSON.stringify(t)}function He(t){try{return JSON.parse(t)}catch{return null}}function fe(t){try{localStorage.setItem(ke,Ce(t))}catch{}}function Fe(){try{const t=localStorage.getItem(ke);return t?He(t):null}catch{return null}}function _e(){return{root:x("/",[x("bin",[b("ls",""),b("cat",""),b("echo",""),b("pwd",""),b("cd",""),b("ip","")]),x("usr",[x("bin",[b("node",""),b("bash","")]),x("share",[b("dict.txt","why are you looking here >:(")])]),x("var",[x("log",[b("auth.log","accepted connection"),b("kern.log","boot ok")]),x("tmp")]),x("proc",[b("cpuinfo","cpu: webasm"),b("meminfo","mem: virtual")]),x("etc",[b("hostname",`jndl
`),b("hosts",`127.0.0.1 localhost
::1 localhost
`),b("os-release",`NAME=Web
ID=web`)]),x("home",[x("alex",[b("README.md",`# Alexander Jandl

Welcome to my terminal. Try \`help\` to see commands.

Useful places:
- ~/about.txt
- ~/skills.md
- ~/projects
`),b("about.txt","Infrastructure & security focused engineer based in Bratislava. I like reliable automation, scalable systems, and cats."),b("skills.md",`- Linux, networking, network security
- AWS & Azure platform security
- Scripting: Bash, Python, Powershell, C
- Zero-trust, identity, and least privilege`),{...b("blog","Open the personal blog"),link:"/blog"},x("projects",[])])]),x("tmp")]),cwd:"/home/alex"}}function ce(t){if(!t)return"/";let n=t.replace(/\\/g,"/");n.startsWith("/")||(n="/"+n);const r=[];for(const s of n.split("/"))!s||s==="."||(s===".."?r.pop():r.push(s));return"/"+r.join("/")}function z(t,n){return!n||n==="."?ce(t):n.startsWith("/")?ce(n):ce(t+"/"+n)}function C(t,n){const r=ce(n).split("/").filter(Boolean);if(r.length===0)return{node:t,parent:null};let s=t,o=null,f=t;for(const v of r){if(!s)return{node:null,parent:null};const p=s.children.find(y=>y.name===v)||null;if(o=s,f=p,!p)return{node:null,parent:o};s=p.type==="dir"?p:null}return{node:f,parent:o}}function he(t,n,r=!1){const s=ce(n);if(s==="/")return{node:t,created:!1};const o=s.split("/").filter(Boolean);let f=t,v=!1;for(const p of o){let y=f.children.find(j=>j.name===p);if(!y){if(!r)return{node:null,created:v};y=x(p),f.children.push(y),v=!0}if(y.type!=="dir")return{node:null,created:v};f=y}return{node:f,created:v}}function Je(t,n,r=!1){const{node:s,parent:o}=C(t,n);if(!s||!o||s.type==="dir"&&s.children.length&&!r)return!1;const f=o.children.findIndex(v=>v.name===s.name);return f>=0&&o.children.splice(f,1),!0}function Ie(t,n,r){const s=t.slice();return s[34]=n[r],s}function xe(t){let n,r=t[34].html+"";return{c(){n=E("div"),this.h()},l(s){n=N(s,"DIV",{class:!0});var o=T(n);o.forEach(S),this.h()},h(){w(n,"class","row svelte-go76ed")},m(s,o){je(s,n,o),n.innerHTML=r},p(s,o){o[0]&32&&r!==(r=s[34].html+"")&&(n.innerHTML=r)},d(s){s&&S(n)}}}function qe(t){let n,r,s,o,f,v,p,y,j,ee,Q,q,O=ye(t[0].cwd)+"",R,te,P,ne,W,H,re,D,Y,M,B,Z,se,I,oe,ue,F=t[5],_=[];for(let m=0;m<F.length;m+=1)_[m]=xe(Ie(t,F,m));return{c(){n=E("div"),r=E("div"),s=E("div"),o=E("span"),f=E("span"),v=E("span"),p=le(),y=E("span"),j=L(G),ee=L("@"),Q=L(ge),q=L(" — "),R=L(O),te=le(),P=E("span"),ne=L("up "),W=L(t[4]),H=L(" min"),re=le(),D=E("div");for(let m=0;m<_.length;m+=1)_[m].c();Y=le(),M=E("div"),B=E("span"),Z=L(t[6]),se=le(),I=E("input"),this.h()},l(m){n=N(m,"DIV",{class:!0,tabindex:!0,role:!0,"aria-label":!0});var A=T(n);r=N(A,"DIV",{class:!0});var h=T(r);s=N(h,"DIV",{class:!0});var K=T(s);o=N(K,"SPAN",{class:!0}),T(o).forEach(S),f=N(K,"SPAN",{class:!0}),T(f).forEach(S),v=N(K,"SPAN",{class:!0}),T(v).forEach(S),K.forEach(S),p=ae(h),y=N(h,"SPAN",{class:!0});var J=T(y);j=V(J,G),ee=V(J,"@"),Q=V(J,ge),q=V(J," — "),R=V(J,O),J.forEach(S),te=ae(h),P=N(h,"SPAN",{class:!0});var e=T(P);ne=V(e,"up "),W=V(e,t[4]),H=V(e," min"),e.forEach(S),h.forEach(S),re=ae(A),D=N(A,"DIV",{class:!0});var i=T(D);for(let d=0;d<_.length;d+=1)_[d].l(i);Y=ae(i),M=N(i,"DIV",{class:!0});var a=T(M);B=N(a,"SPAN",{class:!0,"aria-hidden":!0});var l=T(B);Z=V(l,t[6]),l.forEach(S),se=ae(a),I=N(a,"INPUT",{class:!0,type:!0,spellcheck:!0,autocapitalize:!0,autocomplete:!0,autocorrect:!0}),a.forEach(S),i.forEach(S),A.forEach(S),this.h()},h(){w(o,"class","dot r svelte-go76ed"),w(f,"class","dot y svelte-go76ed"),w(v,"class","dot g svelte-go76ed"),w(s,"class","controls svelte-go76ed"),w(y,"class","title svelte-go76ed"),w(P,"class","uptime svelte-go76ed"),w(r,"class","titlebar svelte-go76ed"),w(B,"class","prompt svelte-go76ed"),w(B,"aria-hidden","true"),w(I,"class","readline svelte-go76ed"),w(I,"type","text"),w(I,"spellcheck","false"),w(I,"autocapitalize","off"),w(I,"autocomplete","off"),w(I,"autocorrect","off"),w(M,"class","row input svelte-go76ed"),w(D,"class","terminal svelte-go76ed"),w(n,"class","terminal-wrap svelte-go76ed"),w(n,"tabindex","0"),w(n,"role","group"),w(n,"aria-label","web terminal")},m(m,A){je(m,n,A),g(n,r),g(r,s),g(s,o),g(s,f),g(s,v),g(r,p),g(r,y),g(y,j),g(y,ee),g(y,Q),g(y,q),g(y,R),g(r,te),g(r,P),g(P,ne),g(P,W),g(P,H),g(n,re),g(n,D);for(let h=0;h<_.length;h+=1)_[h]&&_[h].m(D,null);g(D,Y),g(D,M),g(M,B),g(B,Z),g(M,se),g(M,I),t[11](I),we(I,t[3]),t[13](D),oe||(ue=[X(I,"input",t[12]),X(I,"keydown",t[8]),X(D,"click",t[9]),X(D,"keydown",t[10]),X(n,"click",t[7]),X(n,"keydown",t[14])],oe=!0)},p(m,A){if(A[0]&1&&O!==(O=ye(m[0].cwd)+"")&&pe(R,O),A[0]&16&&pe(W,m[4]),A[0]&32){F=m[5];let h;for(h=0;h<F.length;h+=1){const K=Ie(m,F,h);_[h]?_[h].p(K,A):(_[h]=xe(K),_[h].c(),_[h].m(D,Y))}for(;h<_.length;h+=1)_[h].d(1);_.length=F.length}A[0]&64&&pe(Z,m[6]),A[0]&8&&I.value!==m[3]&&we(I,m[3])},i:me,o:me,d(m){m&&S(n),Ne(_,m),t[11](null),t[13](null),oe=!1,Pe(ue)}}}let ge="jndl",G="alex";function ye(t){const n="/home/"+G;return t===n?"~":t.startsWith(n+"/")?"~"+t.slice(n.length):t}function Re(t){const n=[];let r="",s=!1;for(let o=0;o<t.length;o++){const f=t[o];if(f==='"'){s=!s;continue}if(!s&&/\s/.test(f)){r&&(n.push(r),r="");continue}r+=f}return r&&n.push(r),n}function U(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ue(t){return t==="~"||t.startsWith("~/")?"/home/"+G+(t.length>1?t.slice(1):""):t}function Ge(t){if(!t.length)return"";let n=t[0];for(const r of t.slice(1)){let s=0;for(;s<n.length&&s<r.length&&n[s]===r[s];)s++;if(n=n.slice(0,s),!n)break}return n}function*Ee(t,n){for(const r of t.children){const s=r.type==="dir";yield`${n}${r.name}${s?"/":""}`,s&&(yield*Ee(r,n+"  "))}}function Qe(t,n,r){let s,o=_e(),f,v,p="",y=[],j=-1;const ee=new Date;let Q=0,q=null,O=[];const R={help:"help — list available commands",ls:"ls [path] — list directory contents (click names to open)",tree:"tree [path] — show directory tree",pwd:"pwd — print working directory",cd:"cd <path> — change directory",cat:"cat <file> — print file to terminal",echo:'echo "text" > file — write or append with >>',touch:"touch <file> — create an empty file",mkdir:"mkdir [-p] <dir> — create directory",rm:"rm [-r] <path> — remove file or directory",clear:"clear — clear the screen",whoami:"whoami — print current user",date:"date — print current date/time",uname:"uname — print kernel info",ip:"ip — print public IP address",man:"man <cmd> — show a short description",resetfs:"resetfs — reset filesystem to defaults (clears local storage)"};function te(){const e=Fe();if(e)r(0,o=e);else{const{node:i}=C(o.root,"/home/"+G);i&&i.type==="dir"&&(i.children.push(x("notes")),i.children.push(b("todo.txt",`- replace this with greatness
`)),fe(o))}W('<span class="g">Welcome</span> — type <span class="y">help</span> to get started.'),W("")}function P(){v==null||v.focus()}function ne(){f==null||f.scrollTo({top:f.scrollHeight})}function W(e){r(5,O=[...O,{html:e}]),Oe().then(ne)}async function H(e){const i=e.trim();if(W(`<span class="cmdline"><span class="prompt">${U(s)}</span> <span class="cmdtext">${U(e)}</span></span>`),!i)return;y.push(e),j=y.length;const[a,...l]=Re(i),d=[],c=(u,k=!1)=>d.push({text:u,raw:k});try{switch(a){case"help":c(Object.keys(R).join(", "));break;case"pwd":c(o.cwd);break;case"whoami":c(G);break;case"date":c(new Date().toString());break;case"uname":c("Linux persephone 6.1.0 x86_64 (web)");break;case"ip":{try{const k=await(await fetch("https://api.ipify.org?format=json",{cache:"no-store"})).json();c(`public: ${k.ip}`)}catch{c("ip: unable to fetch external IP")}break}case"clear":r(5,O=[]);break;case"cd":Y(l,c);break;case"ls":M(l,c);break;case"tree":B(l,c);break;case"cat":Z(l,c);break;case"echo":se(l,c);break;case"touch":I(l,c);break;case"mkdir":oe(l,c);break;case"rm":ue(l,c);break;case"resetfs":{Ve(),r(0,o=_e()),fe(o),c("filesystem reset to defaults");break}case"man":{const u=l[0];if(!u){c("man: missing command");break}const k=R[u];c(k||`No manual entry for ${u}`);break}default:c(`${a}: command not found`)}}catch(u){c(String(u))}if(d.length){const u=d.map(k=>k.raw?k.text:U(k.text)).join(`
`);W(u)}fe(o)}function re(e){const i=Ue(e),a=i.startsWith("/")?i:z(o.cwd,i),l=a.endsWith("/"),d=l?a:a.substring(0,a.lastIndexOf("/")>=0?a.lastIndexOf("/"):0),c=l?"":a.split("/").pop()||"",u=C(o.root,d||"/").node;if(!u||u.type!=="dir")return{next:null,suggestions:[]};const $=u.children.map(ie=>ie.type==="dir"?ie.name+"/":ie.name).filter(ie=>ie.startsWith(c));if($.length===0)return{next:null,suggestions:[]};if($.length===1)return{next:l?a:d+"/"+$[0],suggestions:$};const be=Ge($);return be.length>c.length?{next:d+"/"+be,suggestions:$}:{next:null,suggestions:$}}function D(){let e=!1,i=-1;for(let u=0;u<p.length;u++){const k=p[u];k==='"'&&(e=!e),!e&&/\s/.test(k)&&(i=u)}const a=p.slice(0,i+1),l=p.slice(i+1);if(!l)return;const{next:d,suggestions:c}=re(l);if(d){const u=d.startsWith(o.cwd)?d.replace(o.cwd,"").replace(/^\//,""):d;r(3,p=a+u);return}c.length&&W(c.join("  "))}function Y(e,i){const a=z(o.cwd,e[0]??"/"),l=C(o.root,a);if(!l.node)return i(`cd: no such file or directory: ${e[0]??"/"}`);if(l.node.type!=="dir")return i(`cd: not a directory: ${e[0]}`);r(0,o.cwd=a,o)}function M(e,i){const a=z(o.cwd,e[0]??"."),{node:l}=C(o.root,a);if(!l)return i(`ls: cannot access '${e[0]??"."}': No such file or directory`);if(l.type==="file")return i(l.name);z("/",a);const d=l.children.map(c=>{const u=c.type==="dir"?c.name+"/":c.name;if(c.type==="dir")return U(u);const k=c;return k.link?`<a href="${k.link}" class="nav">${U(u)}</a>`:U(u)}).join("  ");i(d,!0)}function B(e,i){const a=z(o.cwd,e[0]??"."),{node:l}=C(o.root,a);if(!l)return i(`tree: ${e[0]??"."}: No such file or directory`);if(l.type==="file")return i(l.name);i(l.name||"/"),i([...Ee(l,"  ")].join(`
`))}function Z(e,i){if(!e[0])return i("cat: missing file operand");const a=z(o.cwd,e[0]),{node:l}=C(o.root,a);if(!l)return i(`cat: ${e[0]}: No such file or directory`);if(l.type!=="file")return i(`cat: ${e[0]}: Is a directory`);i(l.content)}function se(e,i){const a=e.findIndex(l=>l===">"||l===">>");if(a>=0){const l=e.slice(0,a).join(" "),d=e[a]===">>",c=e[a+1];if(!c)return i("echo: redirection needs a file");const u=z(o.cwd,c),k=C(o.root,u);if(!k.node){const $=he(o.root,u.substring(0,u.lastIndexOf("/")),!0).node;if(!$)return i(`echo: cannot create file '${c}'`);$.children.push(b(u.split("/").pop()||"file.txt",l+(d?"":`
`))),fe(o);return}if(k.node.type!=="file")return i(`echo: ${c}: Is a directory`);k.node.content=d?k.node.content+l:l+`
`,k.node.updatedAt=de();return}i(e.join(" "))}function I(e,i){if(!e[0])return i("touch: missing file operand");const a=z(o.cwd,e[0]),l=C(o.root,a);if(!l.node){const d=a.substring(0,a.lastIndexOf("/"))||"/",{node:c}=he(o.root,d,!0);if(!c)return i(`touch: cannot create '${e[0]}'`);c.children.push(b(a.split("/").pop()||"file.txt",""));return}if(l.node.type!=="file")return i(`touch: ${e[0]}: Is a directory`);l.node.updatedAt=de()}function oe(e,i){if(!e[0])return i("mkdir: missing operand");const a=e[0]==="-p",l=a?e[1]:e[0];if(!l)return i("mkdir: missing operand");const d=z(o.cwd,l);if(!he(o.root,d,a).node)return i(`mkdir: cannot create directory '${l}'`)}function ue(e,i){if(!e[0])return i("rm: missing operand");const a=e[0]==="-r",l=a?e[1]:e[0],d=z(o.cwd,l);Je(o.root,d,a)||i(`rm: cannot remove '${l}'`)}function F(e){if(e.key==="Enter"){e.preventDefault();const i=p;r(3,p=""),H(i)}else e.key==="ArrowUp"?(j>0&&(j-=1,r(3,p=y[j]??"")),e.preventDefault()):e.key==="ArrowDown"?(j<y.length&&(j+=1,r(3,p=y[j]??"")),e.preventDefault()):e.key==="c"&&(e.ctrlKey||e.metaKey)?(W('<span class="prompt">'+s+"</span> "+U(p)),r(3,p=""),e.preventDefault()):e.key==="Tab"&&(e.preventDefault(),D())}function _(e){const i=e.target.closest("a.file");if(!i)return;e.preventDefault();const a=i.getAttribute("data-path")||"";i.getAttribute("data-type")==="dir"?H(`cd ${a}`).then(()=>H("ls")):H(`cat ${a}`)}function m(e){e.target.closest("a.file")&&(e.key!=="Enter"&&e.key!==" "||(e.preventDefault(),_(e)))}Te(()=>{te(),P();const e=()=>{r(4,Q=Math.floor((Date.now()-ee.getTime())/6e4))};e(),q=setInterval(e,1e4)}),We(()=>{q&&clearInterval(q)});function A(e){ve[e?"unshift":"push"](()=>{v=e,r(2,v)})}function h(){p=this.value,r(3,p)}function K(e){ve[e?"unshift":"push"](()=>{f=e,r(1,f)})}const J=e=>{(e.key.length===1||e.key==="/"||e.key===" ")&&P()};return t.$$.update=()=>{t.$$.dirty[0]&1&&r(6,s=`${G}@${ge}:${ye(o.cwd)}$`)},[o,f,v,p,Q,O,s,P,F,_,m,A,h,K,J]}class Ye extends Ae{constructor(n){super(),De(this,n,Qe,qe,Se,{},null,[-1,-1])}}function Ze(t){let n,r;return n=new Ye({}),{c(){Me(n.$$.fragment)},l(s){$e(n.$$.fragment,s)},m(s,o){ze(n,s,o),r=!0},p:me,i(s){r||(Be(n.$$.fragment,s),r=!0)},o(s){Ke(n.$$.fragment,s),r=!1},d(s){Le(n,s)}}}class et extends Ae{constructor(n){super(),De(this,n,null,Ze,Se,{})}}export{et as default};
