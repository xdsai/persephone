import{S as ut,i as dt,s as ft,k as g,a as z,q as V,l as v,m as y,h as m,c as K,r as R,n as f,b as pe,G as i,J as Xe,K as Z,u as Le,g as xe,v as Dt,d as Ce,f as St,L as ht,M as Ke,o as At,N as Nt,y as pt,z as mt,A as bt,O as Ie,H as Ge,B as gt,t as Pt,P as we,w as $e,e as et}from"../chunks/index.0cd60f9d.js";import{P as Tt,S as Re}from"../chunks/PersephoneRun.03549fd7.js";const Fe="persephone.fs.v1";function jt(){try{localStorage.removeItem(Fe)}catch{}}function Je(){return Date.now()}function Q(r,e=[]){const t=Je();return{name:r,type:"dir",children:e,createdAt:t,updatedAt:t}}function N(r,e=""){const t=Je();return{name:r,type:"file",content:e,createdAt:t,updatedAt:t}}function Ot(r){return JSON.stringify(r)}function Vt(r){try{return JSON.parse(r)}catch{return null}}function Be(r){try{localStorage.setItem(Fe,Ot(r))}catch{}}function Rt(){try{const r=localStorage.getItem(Fe);return r?Vt(r):null}catch{return null}}function tt(){return{root:Q("/",[Q("bin",[N("ls",""),N("cat",""),N("echo",""),N("pwd",""),N("cd",""),N("ip","")]),Q("usr",[Q("bin",[N("node",""),N("bash","")]),Q("share",[N("dict.txt","why are you looking here >:(")])]),Q("var",[Q("log",[N("auth.log","accepted connection"),N("kern.log","boot ok")]),Q("tmp")]),Q("proc",[N("cpuinfo","cpu: webasm"),N("meminfo","mem: virtual")]),Q("etc",[N("hostname",`jndl
`),N("hosts",`127.0.0.1 localhost
::1 localhost
`),N("os-release",`NAME=Web
ID=web`)]),Q("home",[Q("alex",[N("README.md",`# Alexander Jandl

Welcome to my terminal. Try \`help\` to see commands.

Useful places:
- ~/about.txt
- ~/skills.md
- ~/projects
`),N("about.txt","Infrastructure & security focused engineer based in Bratislava. I like reliable automation, scalable systems, and cats."),N("skills.md",`- Linux, networking, network security
- AWS & Azure platform security
- Scripting: Bash, Python, Powershell, C
- Zero-trust, identity, and least privilege`),{...N("blog","Open the personal blog"),link:"/blog"},Q("projects",[{...N("persephone",`personal webpage, vibecoded from scratch.
i don't know any frontend :D`),link:"https://github.com/xdsai/persephone"}]),Q("socials",[{...N("github","my github profile"),link:"https://github.com/xdsai"},{...N("linkedin","my linkedin profile"),link:"https://www.linkedin.com/in/jndl/"},{...N("email","email me something nice! no nigerian princes please"),link:"mailto:alex@jndl.dev"}])])]),Q("tmp")]),cwd:"/home/alex"}}function We(r){if(!r)return"/";let e=r.replace(/\\/g,"/");e.startsWith("/")||(e="/"+e);const t=[];for(const n of e.split("/"))!n||n==="."||(n===".."?t.pop():t.push(n));return"/"+t.join("/")}function he(r,e){return!e||e==="."?We(r):e.startsWith("/")?We(e):We(r+"/"+e)}function Ee(r,e){const t=We(e).split("/").filter(Boolean);if(t.length===0)return{node:r,parent:null};let n=r,s=null,o=r;for(const a of t){if(!n)return{node:null,parent:null};const h=n.children.find(b=>b.name===a)||null;if(s=n,o=h,!h)return{node:null,parent:s};n=h.type==="dir"?h:null}return{node:o,parent:s}}function Me(r,e,t=!1){const n=We(e);if(n==="/")return{node:r,created:!1};const s=n.split("/").filter(Boolean);let o=r,a=!1;for(const h of s){let b=o.children.find(w=>w.name===h);if(!b){if(!t)return{node:null,created:a};b=Q(h),o.children.push(b),a=!0}if(b.type!=="dir")return{node:null,created:a};o=b}return{node:o,created:a}}function Lt(r,e,t=!1){const{node:n,parent:s}=Ee(r,e);if(!n||!s||n.type==="dir"&&n.children.length&&!t)return!1;const o=s.children.findIndex(a=>a.name===n.name);return o>=0&&s.children.splice(o,1),!0}function nt(r,e,t){const n=r.slice();return n[55]=e[t],n}function rt(r,e,t){const n=r.slice();return n[58]=e[t],n}function st(r){let e,t=r[58].html+"";return{c(){e=g("div"),this.h()},l(n){e=v(n,"DIV",{class:!0});var s=y(e);s.forEach(m),this.h()},h(){f(e,"class","row svelte-1b6yka8")},m(n,s){pe(n,e,s),e.innerHTML=t},p(n,s){s[0]&32&&t!==(t=n[58].html+"")&&(e.innerHTML=t)},d(n){n&&m(e)}}}function lt(r){let e,t,n,s,o,a,h,b,w,H,X,$,B;return H=new Tt({props:{src:"/story.json"}}),{c(){e=g("div"),t=g("div"),n=g("div"),s=V("NEON THIRTEEN — PERSEPHONE RUN"),o=z(),a=g("button"),h=V("×"),b=z(),w=g("div"),pt(H.$$.fragment),this.h()},l(C){e=v(C,"DIV",{class:!0,role:!0,"aria-label":!0});var F=y(e);t=v(F,"DIV",{class:!0});var T=y(t);n=v(T,"DIV",{class:!0});var D=y(n);s=R(D,"NEON THIRTEEN — PERSEPHONE RUN"),D.forEach(m),o=K(T),a=v(T,"BUTTON",{class:!0,"aria-label":!0});var J=y(a);h=R(J,"×"),J.forEach(m),b=K(T),w=v(T,"DIV",{class:!0});var te=y(w);mt(H.$$.fragment,te),te.forEach(m),T.forEach(m),F.forEach(m),this.h()},h(){f(n,"class","obartitle svelte-1b6yka8"),f(a,"class","close svelte-1b6yka8"),f(a,"aria-label","close"),f(w,"class","content svelte-1b6yka8"),f(t,"class","box svelte-1b6yka8"),f(e,"class","overlay svelte-1b6yka8"),f(e,"role","dialog"),f(e,"aria-label","persephone game")},m(C,F){pe(C,e,F),i(e,t),i(t,n),i(n,s),i(t,o),i(t,a),i(a,h),i(t,b),i(t,w),bt(H,w,null),X=!0,$||(B=[Z(a,"click",r[30]),Z(t,"click",Ie(r[25])),Z(t,"keydown",Ie(r[26])),Z(e,"click",Ie(r[23])),Z(e,"keydown",Ie(r[24]))],$=!0)},p:Ge,i(C){X||(xe(H.$$.fragment,C),X=!0)},o(C){Ce(H.$$.fragment,C),X=!1},d(C){C&&m(e),gt(H),$=!1,Ke(B)}}}function at(r){let e,t,n,s,o,a,h,b,w,H,X,$,B,C=JSON.stringify(r[13],null,2)+"",F,T,D,J,te,me,Y,A,U,ne,ae,re,de,W,se;function oe(q,le){return q[8]?Wt:xt}let fe=oe(r),G=fe(r);return{c(){e=g("div"),t=g("div"),n=g("div"),s=V("Signal Bloom — ARG Panel"),o=z(),a=g("button"),h=V("×"),b=z(),w=g("div"),H=g("div"),X=V("Steganographic shards"),$=z(),B=g("pre"),F=V(C),T=z(),D=g("div"),J=g("div"),te=V("Discovered lore"),me=z(),G.c(),Y=z(),A=g("div"),U=g("a"),ne=V("Resume Story"),ae=z(),re=g("a"),de=V("Open blog entry"),this.h()},l(q){e=v(q,"DIV",{class:!0,role:!0,"aria-label":!0});var le=y(e);t=v(le,"DIV",{class:!0});var M=y(t);n=v(M,"DIV",{class:!0});var ge=y(n);s=R(ge,"Signal Bloom — ARG Panel"),ge.forEach(m),o=K(M),a=v(M,"BUTTON",{class:!0,"aria-label":!0});var De=y(a);h=R(De,"×"),De.forEach(m),b=K(M),w=v(M,"DIV",{class:!0});var ie=y(w);H=v(ie,"DIV",{class:!0});var L=y(H);X=R(L,"Steganographic shards"),L.forEach(m),$=K(ie),B=v(ie,"PRE",{class:!0});var P=y(B);F=R(P,C),P.forEach(m),ie.forEach(m),T=K(M),D=v(M,"DIV",{class:!0});var O=y(D);J=v(O,"DIV",{class:!0});var k=y(J);te=R(k,"Discovered lore"),k.forEach(m),me=K(O),G.l(O),O.forEach(m),Y=K(M),A=v(M,"DIV",{class:!0});var S=y(A);U=v(S,"A",{class:!0,href:!0});var I=y(U);ne=R(I,"Resume Story"),I.forEach(m),ae=K(S),re=v(S,"A",{class:!0,href:!0});var ue=y(re);de=R(ue,"Open blog entry"),ue.forEach(m),S.forEach(m),M.forEach(m),le.forEach(m),this.h()},h(){f(n,"class","obartitle svelte-1b6yka8"),f(a,"class","close svelte-1b6yka8"),f(a,"aria-label","close"),f(H,"class","arghead svelte-1b6yka8"),f(B,"class","payload svelte-1b6yka8"),f(w,"class","argsec svelte-1b6yka8"),f(J,"class","arghead svelte-1b6yka8"),f(D,"class","argsec svelte-1b6yka8"),f(U,"class","nav svelte-1b6yka8"),f(U,"href","/blog/neon-thirteen-persephone-run#persephone"),f(re,"class","nav svelte-1b6yka8"),f(re,"href","/blog/neon-thirteen-persephone-run"),f(A,"class","argsec links svelte-1b6yka8"),f(t,"class","box arg svelte-1b6yka8"),f(e,"class","overlay svelte-1b6yka8"),f(e,"role","dialog"),f(e,"aria-label","ARG panel")},m(q,le){pe(q,e,le),i(e,t),i(t,n),i(n,s),i(t,o),i(t,a),i(a,h),i(t,b),i(t,w),i(w,H),i(H,X),i(w,$),i(w,B),i(B,F),i(t,T),i(t,D),i(D,J),i(J,te),i(D,me),G.m(D,null),i(t,Y),i(t,A),i(A,U),i(U,ne),i(A,ae),i(A,re),i(re,de),W||(se=[Z(a,"click",r[31]),Z(t,"click",Ie(r[21])),Z(t,"keydown",Ie(r[22])),Z(e,"click",Ie(r[19])),Z(e,"keydown",Ie(r[20]))],W=!0)},p(q,le){fe===(fe=oe(q))&&G?G.p(q,le):(G.d(1),G=fe(q),G&&(G.c(),G.m(D,null)))},d(q){q&&m(e),G.d(),W=!1,Ke(se)}}}function xt(r){let e,t;return{c(){e=g("div"),t=V("no registry"),this.h()},l(n){e=v(n,"DIV",{class:!0});var s=y(e);t=R(s,"no registry"),s.forEach(m),this.h()},h(){f(e,"class","dim")},m(n,s){pe(n,e,s),i(e,t)},p:Ge,d(n){n&&m(e)}}}function Wt(r){let e;function t(o,a){var h,b,w;return(w=(b=(h=o[9])==null?void 0:h.state)==null?void 0:b.loreDiscoveries)!=null&&w.length?Bt:Ht}let n=t(r),s=n(r);return{c(){s.c(),e=et()},l(o){s.l(o),e=et()},m(o,a){s.m(o,a),pe(o,e,a)},p(o,a){n===(n=t(o))&&s?s.p(o,a):(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){s.d(o),o&&m(e)}}}function Ht(r){let e,t;return{c(){e=g("div"),t=V("no lore discovered"),this.h()},l(n){e=v(n,"DIV",{class:!0});var s=y(e);t=R(s,"no lore discovered"),s.forEach(m),this.h()},h(){f(e,"class","dim")},m(n,s){pe(n,e,s),i(e,t)},p:Ge,d(n){n&&m(e)}}}function Bt(r){let e,t=r[14](r[9]),n=[];for(let s=0;s<t.length;s+=1)n[s]=it(nt(r,t,s));return{c(){e=g("ul");for(let s=0;s<n.length;s+=1)n[s].c()},l(s){e=v(s,"UL",{});var o=y(e);for(let a=0;a<n.length;a+=1)n[a].l(o);o.forEach(m)},m(s,o){pe(s,e,o);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null)},p(s,o){if(o[0]&16896){t=s[14](s[9]);let a;for(a=0;a<t.length;a+=1){const h=nt(s,t,a);n[a]?n[a].p(h,o):(n[a]=it(h),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(s){s&&m(e),ht(n,s)}}}function ot(r){let e,t,n=r[55].summary+"",s;return{c(){e=g("span"),t=V("— "),s=V(n),this.h()},l(o){e=v(o,"SPAN",{class:!0});var a=y(e);t=R(a,"— "),s=R(a,n),a.forEach(m),this.h()},h(){f(e,"class","lsum svelte-1b6yka8")},m(o,a){pe(o,e,a),i(e,t),i(e,s)},p(o,a){a[0]&512&&n!==(n=o[55].summary+"")&&Le(s,n)},d(o){o&&m(e)}}}function it(r){let e,t,n=r[55].title+"",s,o=r[55].summary&&ot(r);return{c(){e=g("li"),t=g("span"),s=V(n),o&&o.c(),this.h()},l(a){e=v(a,"LI",{});var h=y(e);t=v(h,"SPAN",{class:!0});var b=y(t);s=R(b,n),b.forEach(m),o&&o.l(h),h.forEach(m),this.h()},h(){f(t,"class","ltitle svelte-1b6yka8")},m(a,h){pe(a,e,h),i(e,t),i(t,s),o&&o.m(e,null)},p(a,h){h[0]&512&&n!==(n=a[55].title+"")&&Le(s,n),a[55].summary?o?o.p(a,h):(o=ot(a),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(a){a&&m(e),o&&o.d()}}}function Ct(r){let e,t,n,s,o,a,h,b,w,H,X,$,B=ze(r[0].cwd)+"",C,F,T,D,J,te,me,Y,A,U,ne,ae,re,de,W,se,oe,fe,G,q,le,M,ge,De,ie=r[5],L=[];for(let k=0;k<ie.length;k+=1)L[k]=st(rt(r,ie,k));let P=r[6]&&lt(r),O=r[7]&&at(r);return{c(){e=g("div"),t=g("div"),n=g("div"),s=g("span"),o=g("span"),a=g("span"),h=z(),b=g("span"),w=V(je),H=V("@"),X=V(Ue),$=V(" — "),C=V(B),F=z(),T=g("span"),D=V("up "),J=V(r[4]),te=V(" min"),me=z(),Y=g("div"),A=g("div");for(let k=0;k<L.length;k+=1)L[k].c();U=z(),ne=g("div"),ae=g("span"),re=V(r[10]),de=z(),W=g("input"),se=z(),oe=g("div"),fe=z(),G=g("div"),q=z(),P&&P.c(),le=z(),O&&O.c(),this.h()},l(k){e=v(k,"DIV",{class:!0,tabindex:!0,role:!0,"aria-label":!0});var S=y(e);t=v(S,"DIV",{class:!0});var I=y(t);n=v(I,"DIV",{class:!0});var ue=y(n);s=v(ue,"SPAN",{class:!0}),y(s).forEach(m),o=v(ue,"SPAN",{class:!0}),y(o).forEach(m),a=v(ue,"SPAN",{class:!0}),y(a).forEach(m),ue.forEach(m),h=K(I),b=v(I,"SPAN",{class:!0,style:!0});var ve=y(b);w=R(ve,je),H=R(ve,"@"),X=R(ve,Ue),$=R(ve," — "),C=R(ve,B),ve.forEach(m),F=K(I),T=v(I,"SPAN",{class:!0});var Ne=y(T);D=R(Ne,"up "),J=R(Ne,r[4]),te=R(Ne," min"),Ne.forEach(m),I.forEach(m),me=K(S),Y=v(S,"DIV",{class:!0});var ye=y(Y);A=v(ye,"DIV",{class:!0});var Pe=y(A);for(let Oe=0;Oe<L.length;Oe+=1)L[Oe].l(Pe);U=K(Pe),ne=v(Pe,"DIV",{class:!0});var Te=y(ne);ae=v(Te,"SPAN",{class:!0,"aria-hidden":!0});var He=y(ae);re=R(He,r[10]),He.forEach(m),de=K(Te),W=v(Te,"INPUT",{class:!0,type:!0,spellcheck:!0,autocapitalize:!0,autocomplete:!0,autocorrect:!0}),Te.forEach(m),Pe.forEach(m),se=K(ye),oe=v(ye,"DIV",{class:!0,"aria-hidden":!0}),y(oe).forEach(m),fe=K(ye),G=v(ye,"DIV",{class:!0,"aria-hidden":!0}),y(G).forEach(m),ye.forEach(m),q=K(S),P&&P.l(S),le=K(S),O&&O.l(S),S.forEach(m),this.h()},h(){f(s,"class","dot r svelte-1b6yka8"),f(o,"class","dot y svelte-1b6yka8"),f(a,"class","dot g svelte-1b6yka8"),f(n,"class","controls svelte-1b6yka8"),f(b,"class","title svelte-1b6yka8"),f(b,"style",`animation: glitch ${r[11].toFixed(2)}s infinite steps(2); animation-delay:${r[12].toFixed(2)}s`),f(T,"class","uptime svelte-1b6yka8"),f(t,"class","titlebar svelte-1b6yka8"),f(ae,"class","prompt svelte-1b6yka8"),f(ae,"aria-hidden","true"),f(W,"class","readline svelte-1b6yka8"),f(W,"type","text"),f(W,"spellcheck","false"),f(W,"autocapitalize","off"),f(W,"autocomplete","off"),f(W,"autocorrect","off"),f(ne,"class","row input svelte-1b6yka8"),f(A,"class","terminal svelte-1b6yka8"),f(oe,"class","fx fx-scan svelte-1b6yka8"),f(oe,"aria-hidden","true"),f(G,"class","fx fx-noise svelte-1b6yka8"),f(G,"aria-hidden","true"),f(Y,"class","term-pane svelte-1b6yka8"),f(e,"class","terminal-wrap svelte-1b6yka8"),f(e,"tabindex","0"),f(e,"role","group"),f(e,"aria-label","web terminal")},m(k,S){pe(k,e,S),i(e,t),i(t,n),i(n,s),i(n,o),i(n,a),i(t,h),i(t,b),i(b,w),i(b,H),i(b,X),i(b,$),i(b,C),i(t,F),i(t,T),i(T,D),i(T,J),i(T,te),i(e,me),i(e,Y),i(Y,A);for(let I=0;I<L.length;I+=1)L[I]&&L[I].m(A,null);i(A,U),i(A,ne),i(ne,ae),i(ae,re),i(ne,de),i(ne,W),r[27](W),Xe(W,r[3]),r[29](A),i(Y,se),i(Y,oe),i(Y,fe),i(Y,G),i(e,q),P&&P.m(e,null),i(e,le),O&&O.m(e,null),M=!0,ge||(De=[Z(W,"input",r[28]),Z(W,"keydown",r[16]),Z(A,"click",r[17]),Z(A,"keydown",r[18]),Z(e,"click",r[15]),Z(e,"keydown",r[32])],ge=!0)},p(k,S){if((!M||S[0]&1)&&B!==(B=ze(k[0].cwd)+"")&&Le(C,B),(!M||S[0]&16)&&Le(J,k[4]),S[0]&32){ie=k[5];let I;for(I=0;I<ie.length;I+=1){const ue=rt(k,ie,I);L[I]?L[I].p(ue,S):(L[I]=st(ue),L[I].c(),L[I].m(A,U))}for(;I<L.length;I+=1)L[I].d(1);L.length=ie.length}(!M||S[0]&1024)&&Le(re,k[10]),S[0]&8&&W.value!==k[3]&&Xe(W,k[3]),k[6]?P?(P.p(k,S),S[0]&64&&xe(P,1)):(P=lt(k),P.c(),xe(P,1),P.m(e,le)):P&&(Dt(),Ce(P,1,1,()=>{P=null}),St()),k[7]?O?O.p(k,S):(O=at(k),O.c(),O.m(e,null)):O&&(O.d(1),O=null)},i(k){M||(xe(P),M=!0)},o(k){Ce(P),M=!1},d(k){k&&m(e),ht(L,k),r[27](null),r[29](null),P&&P.d(),O&&O.d(),ge=!1,Ke(De)}}}let Ue="jndl",je="alex";async function ct(r){var s;if(typeof((s=crypto==null?void 0:crypto.subtle)==null?void 0:s.digest)!="function")return"sha256:unavailable";const e=new TextEncoder().encode(r),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(o=>o.toString(16).padStart(2,"0")).join("")}function ze(r){const e="/home/"+je;return r===e?"~":r.startsWith(e+"/")?"~"+r.slice(e.length):r}function Jt(r){const e=[];let t="",n=!1;for(let s=0;s<r.length;s++){const o=r[s];if(o==='"'){n=!n;continue}if(!n&&/\s/.test(o)){t&&(e.push(t),t="");continue}t+=o}return t&&e.push(t),e}function Ae(r){return r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Gt(r){return r==="~"||r.startsWith("~/")?"/home/"+je+(r.length>1?r.slice(1):""):r}function Mt(r){if(!r.length)return"";let e=r[0];for(const t of r.slice(1)){let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];)n++;if(e=e.slice(0,n),!e)break}return e}function*vt(r,e){for(const t of r.children){const n=t.type==="dir";yield`${e}${t.name}${n?"/":""}`,n&&(yield*vt(t,e+"  "))}}function Ut(r,e,t){let n,s=tt(),o,a,h="",b=[],w=-1;const H=new Date;let X=0,$=null,B=[];const C={help:"help — list available commands",ls:"ls [path] — list directory contents (click names to open)",tree:"tree [path] — show directory tree",pwd:"pwd — print working directory",cd:"cd <path> — change directory",cat:"cat <file> — print file to terminal",echo:'echo "text" > file — write or append with >>',touch:"touch <file> — create an empty file",mkdir:"mkdir [-p] <dir> — create directory",rm:"rm [-r] <path> — remove file or directory",clear:"clear — clear the screen",whoami:"whoami — print current user",date:"date — print current date/time",uname:"uname — print kernel info",ip:"ip — print public IP address",man:"man <cmd> — show a short description",resetfs:"resetfs — reset filesystem to defaults (clears local storage)",play:"play — open the Persephone story",save:"save — save current Persephone run",load:"load — load saved Persephone run",reset:"reset — reset Persephone run","persephone --bloom":"persephone --bloom — attempt to bloom the signal","whois alex":"whois alex — post metadata + checksum hint"};let F=!1,T=!1,D=null,J=null,te=null;const me=4+Math.random()*4,Y=Math.random()*3;function A(){try{const l=localStorage.getItem(Re);t(9,te=l?JSON.parse(l):null)}catch{t(9,te=null)}}async function U(){var l,d;if(!D){try{const p=await fetch("/story.json");if(p.ok){const u=await p.json();D=u.meta||null,t(8,J=((l=u.meta)==null?void 0:l.loreRegistry)||null);return}}catch{}try{const u=await(await fetch("/assets/persephone-run.json")).json();D=u.meta||null,t(8,J=((d=u.meta)==null?void 0:d.loreRegistry)||null)}catch{}}}const ne={status:"decrypted",shards:6,hint:"six seeds bloom a signal",routes:["/blog/welcome","/"]};function ae(l){var d;try{const p=((d=l==null?void 0:l.state)==null?void 0:d.loreDiscoveries)||[];return!Array.isArray(p)||!J?[]:p.map(u=>J.find(_=>_.slug===u)).filter(Boolean)}catch{return[]}}function re(){const l=Rt();l?t(0,s=l):Be(s),se('<span class="g">Welcome</span> — type <span class="y">help</span> to get started.'),se(`<div class="onboard">Quick start:
      <a href="#" class="cmd" data-cmd="ls">list files</a>
      · <a href="/blog" class="nav">blog</a>
      <div class="hint">Tip: use <b>ls</b> to list, <b>cat &lt;file&gt;</b> to read, <b>cd &lt;dir&gt;</b> to open</div>
    </div>`),se('<div class="onboard"><span class="y">hints</span>: names resolve to records · six seeds bloom a signal</div>')}function de(){a==null||a.focus()}function W(){o==null||o.scrollTo({top:o.scrollHeight})}function se(l){t(5,B=[...B,{html:l}]),Pt().then(()=>{W()})}async function oe(l){var x,ee,ce,Ve,ke,qe,Ye,Qe,Ze;const d=l.trim();if(se(`<span class="cmdline"><span class="prompt">${Ae(n)}</span> <span class="cmdtext">${Ae(l)}</span></span>`),!d)return;b.push(l),w=b.length;const[p,...u]=Jt(d),_=[],c=(_e,be=!1)=>_.push({text:_e,raw:be});try{const _e=(p||"").toLowerCase(),be=u.map(j=>(j||"").toLowerCase());switch(_e){case"help":c(Object.keys(C).join(", "));break;case"pwd":c(s.cwd);break;case"whoami":c(je);break;case"date":c(new Date().toString());break;case"uname":c("Linux persephone 6.1.0 x86_64 (web)");break;case"ip":{try{const E=await(await fetch("https://api.ipify.org?format=json",{cache:"no-store"})).json();c(`public: ${E.ip}`)}catch{c("ip: unable to fetch external IP")}break}case"clear":t(5,B=[]);break;case"cd":q(u,c);break;case"ls":le(u,c);break;case"tree":M(u,c);break;case"cat":ge(u,c);break;case"echo":De(u,c);break;case"touch":ie(u,c);break;case"mkdir":L(u,c);break;case"rm":P(u,c);break;case"resetfs":{jt(),t(0,s=tt()),Be(s),c("filesystem reset to defaults");break}case"man":{const j=u[0];if(!j){c("man: missing command");break}const E=C[j];c(E||`No manual entry for ${j}`);break}case"play":{await U(),t(6,F=!0),c("opening game…");break}case"save":{c("persephone: auto-saved (if a run is in progress).");break}case"load":{if(!!!localStorage.getItem(Re)){c("persephone: no save found");break}t(6,F=!0),c("persephone: loaded (open window).");break}case"reset":{localStorage.removeItem(Re),c("persephone: save cleared");break}case"whois":{await U();const j=(be[0]||"").toLowerCase();if(j==="alex"){if(!(D!=null&&D.webTieIn)){c("whois: info unavailable");break}const E=D.webTieIn,Se=await ct(`${E.blogTitle}|${E.blogDate}`);c(`title: ${E.blogTitle}
date: ${E.blogDate}
author: ${E.blogAuthor}
summary: ${E.summary||""}
checksum: ${Se.slice(0,16)}…`)}else if(j==="johnny")try{const E=localStorage.getItem("persephone-run-v1:save"),Se=E?JSON.parse(E):null,It=!!(((x=Se==null?void 0:Se.state)==null?void 0:x.loreDiscoveries)||[]).includes("johnny-silverhand");c(It?"record shows JOHNNY S— (silver tape wrapped on right hand).":"record incomplete.")}catch{c("record incomplete.")}else c("whois: try `whois alex`");break}case"persephone":{if(be[0]==="--bloom"){await U();try{const j=localStorage.getItem(Re);if(!j){c("no bloom: signal dormant");break}const E=JSON.parse(j);!!((ce=(ee=E==null?void 0:E.state)==null?void 0:ee.flags)!=null&&ce.blogPosted)&&((ke=(Ve=E==null?void 0:E.state)==null?void 0:Ve.flags)==null?void 0:ke.blogClean)===!1?(t(7,T=!0),c("bloom: signal decrypted (open panel)"),A()):c("no bloom: signal dormant")}catch{c("no bloom: signal dormant")}}else c("persephone: unknown flag");break}case"pomegranate":case"kore13":{await U();try{const j=localStorage.getItem(Re);if(!j){c("no bloom: signal dormant");break}const E=JSON.parse(j);!!((Ye=(qe=E==null?void 0:E.state)==null?void 0:qe.flags)!=null&&Ye.blogPosted)&&((Ze=(Qe=E==null?void 0:E.state)==null?void 0:Qe.flags)==null?void 0:Ze.blogClean)===!1?(t(7,T=!0),c("bloom: signal decrypted (open panel)"),A()):c("no bloom: signal dormant")}catch{c("no bloom: signal dormant")}break}default:if(_e+" "+(be[0]||"")=="whois alex"){if(await U(),!(D!=null&&D.webTieIn)){c("whois: info unavailable");break}const j=D.webTieIn,E=await ct(`${j.blogTitle}|${j.blogDate}`);c(`title: ${j.blogTitle}
date: ${j.blogDate}
author: ${j.blogAuthor}
summary: ${j.summary||""}
checksum: ${E.slice(0,16)}…`)}else c(`${p}: command not found`)}}catch(_e){c(String(_e))}if(_.length){const _e=_.map(be=>be.raw?be.text:Ae(be.text)).join(`
`);se(_e)}Be(s)}function fe(l){const d=Gt(l),p=d.startsWith("/")?d:he(s.cwd,d),u=p.endsWith("/"),_=u?p:p.substring(0,p.lastIndexOf("/")>=0?p.lastIndexOf("/"):0),c=u?"":p.split("/").pop()||"",x=Ee(s.root,_||"/").node;if(!x||x.type!=="dir")return{next:null,suggestions:[]};const ce=x.children.map(ke=>ke.type==="dir"?ke.name+"/":ke.name).filter(ke=>ke.startsWith(c));if(ce.length===0)return{next:null,suggestions:[]};if(ce.length===1)return{next:u?p:_+"/"+ce[0],suggestions:ce};const Ve=Mt(ce);return Ve.length>c.length?{next:_+"/"+Ve,suggestions:ce}:{next:null,suggestions:ce}}function G(){let l=!1,d=-1;for(let x=0;x<h.length;x++){const ee=h[x];ee==='"'&&(l=!l),!l&&/\s/.test(ee)&&(d=x)}const p=h.slice(0,d+1),u=h.slice(d+1);if(!u)return;const{next:_,suggestions:c}=fe(u);if(_){const x=_.startsWith(s.cwd)?_.replace(s.cwd,"").replace(/^\//,""):_;t(3,h=p+x);return}c.length&&se(c.join("  "))}function q(l,d){const p=he(s.cwd,l[0]??"/"),u=Ee(s.root,p);if(!u.node)return d(`cd: no such file or directory: ${l[0]??"/"}`);if(u.node.type!=="dir")return d(`cd: not a directory: ${l[0]}`);t(0,s.cwd=p,s)}function le(l,d){const p=he(s.cwd,l[0]??"."),{node:u}=Ee(s.root,p);if(!u)return d(`ls: cannot access '${l[0]??"."}': No such file or directory`);if(u.type==="file")return d(u.name);he("/",p);const _=u.children.map(c=>{const x=c.type==="dir"?c.name+"/":c.name;if(c.type==="dir")return Ae(x);const ee=c;return ee.link?`<a href="${ee.link}" class="nav">${Ae(x)}</a>`:Ae(x)}).join("  ");d(_,!0)}function M(l,d){const p=he(s.cwd,l[0]??"."),{node:u}=Ee(s.root,p);if(!u)return d(`tree: ${l[0]??"."}: No such file or directory`);if(u.type==="file")return d(u.name);d(u.name||"/"),d([...vt(u,"  ")].join(`
`))}function ge(l,d){if(!l[0])return d("cat: missing file operand");const p=he(s.cwd,l[0]),{node:u}=Ee(s.root,p);if(!u)return d(`cat: ${l[0]}: No such file or directory`);if(u.type!=="file")return d(`cat: ${l[0]}: Is a directory`);d(u.content)}function De(l,d){const p=l.findIndex(u=>u===">"||u===">>");if(p>=0){const u=l.slice(0,p).join(" "),_=l[p]===">>",c=l[p+1];if(!c)return d("echo: redirection needs a file");const x=he(s.cwd,c),ee=Ee(s.root,x);if(!ee.node){const ce=Me(s.root,x.substring(0,x.lastIndexOf("/")),!0).node;if(!ce)return d(`echo: cannot create file '${c}'`);ce.children.push(N(x.split("/").pop()||"file.txt",u+(_?"":`
`))),Be(s);return}if(ee.node.type!=="file")return d(`echo: ${c}: Is a directory`);ee.node.content=_?ee.node.content+u:u+`
`,ee.node.updatedAt=Je();return}d(l.join(" "))}function ie(l,d){if(!l[0])return d("touch: missing file operand");const p=he(s.cwd,l[0]),u=Ee(s.root,p);if(!u.node){const _=p.substring(0,p.lastIndexOf("/"))||"/",{node:c}=Me(s.root,_,!0);if(!c)return d(`touch: cannot create '${l[0]}'`);c.children.push(N(p.split("/").pop()||"file.txt",""));return}if(u.node.type!=="file")return d(`touch: ${l[0]}: Is a directory`);u.node.updatedAt=Je()}function L(l,d){if(!l[0])return d("mkdir: missing operand");const p=l[0]==="-p",u=p?l[1]:l[0];if(!u)return d("mkdir: missing operand");const _=he(s.cwd,u);if(!Me(s.root,_,p).node)return d(`mkdir: cannot create directory '${u}'`)}function P(l,d){if(!l[0])return d("rm: missing operand");const p=l[0]==="-r",u=p?l[1]:l[0],_=he(s.cwd,u);Lt(s.root,_,p)||d(`rm: cannot remove '${u}'`)}function O(l){if(l.key==="Enter"){l.preventDefault();const d=h;t(3,h=""),oe(d)}else l.key==="ArrowUp"?(w>0&&(w-=1,t(3,h=b[w]??"")),l.preventDefault()):l.key==="ArrowDown"?(w<b.length&&(w+=1,t(3,h=b[w]??"")),l.preventDefault()):l.key==="c"&&(l.ctrlKey||l.metaKey)?(se('<span class="prompt">'+n+"</span> "+Ae(h)),t(3,h=""),l.preventDefault()):l.key==="Tab"&&(l.preventDefault(),G())}function k(l){const d=l.target,p=d.closest("a.cmd");if(p){l.preventDefault();const _=p.getAttribute("data-cmd")||"";_&&oe(_);return}const u=d.closest("a.nav");if(u){l.preventDefault();const _=u.getAttribute("href")||"";_&&(window.location.href=_)}}function S(l){const d=l.target;if(!(l.key==="Enter"||l.key===" "))return;const u=d.closest("a.cmd"),_=d.closest("a.nav");if(u){l.preventDefault();const c=u.getAttribute("data-cmd")||"";c&&oe(c);return}if(_){l.preventDefault();const c=_.getAttribute("href")||"";c&&(window.location.href=c)}}At(()=>{re(),de();const l=()=>{t(4,X=Math.floor((Date.now()-H.getTime())/6e4))};l(),$=setInterval(l,1e4),typeof window<"u"&&window.addEventListener("persephone:save",A)}),Nt(()=>{$&&clearInterval($),typeof window<"u"&&window.removeEventListener("persephone:save",A)});function I(l){we.call(this,r,l)}function ue(l){we.call(this,r,l)}function ve(l){we.call(this,r,l)}function Ne(l){we.call(this,r,l)}function ye(l){we.call(this,r,l)}function Pe(l){we.call(this,r,l)}function Te(l){we.call(this,r,l)}function He(l){we.call(this,r,l)}function Oe(l){$e[l?"unshift":"push"](()=>{a=l,t(2,a)})}function yt(){h=this.value,t(3,h)}function kt(l){$e[l?"unshift":"push"](()=>{o=l,t(1,o)})}const _t=()=>t(6,F=!1),wt=()=>t(7,T=!1),Et=l=>{(l.key.length===1||l.key==="/"||l.key===" ")&&de()};return r.$$.update=()=>{r.$$.dirty[0]&1&&t(10,n=`${je}@${Ue}:${ze(s.cwd)}$`)},[s,o,a,h,X,B,F,T,J,te,n,me,Y,ne,ae,de,O,k,S,I,ue,ve,Ne,ye,Pe,Te,He,Oe,yt,kt,_t,wt,Et]}class zt extends ut{constructor(e){super(),dt(this,e,Ut,Ct,ft,{},null,[-1,-1])}}function Kt(r){let e,t;return e=new zt({}),{c(){pt(e.$$.fragment)},l(n){mt(e.$$.fragment,n)},m(n,s){bt(e,n,s),t=!0},p:Ge,i(n){t||(xe(e.$$.fragment,n),t=!0)},o(n){Ce(e.$$.fragment,n),t=!1},d(n){gt(e,n)}}}class Yt extends ut{constructor(e){super(),dt(this,e,null,Kt,ft,{})}}export{Yt as default};
