import{S as vt,i as yt,s as _t,k as g,a as F,q as R,l as b,m as y,h as m,c as M,r as G,n as d,b as ge,G as i,J as at,K as $,u as Le,g as We,v as Rt,d as Ce,f as Gt,L as kt,M as Qe,o as Lt,N as Wt,y as wt,z as Et,A as It,O as Ae,H as Me,B as Nt,t as it,P as De,w as ze,e as ct}from"../chunks/index.0cd60f9d.js";import{P as Bt,S as Pe}from"../chunks/PersephoneRun.d1c6982d.js";const Ze="persephone.fs.v1";function Ht(){try{localStorage.removeItem(Ze)}catch{}}function Fe(){return Date.now()}function X(r,e=[]){const t=Fe();return{name:r,type:"dir",children:e,createdAt:t,updatedAt:t}}function N(r,e=""){const t=Fe();return{name:r,type:"file",content:e,createdAt:t,updatedAt:t}}function Jt(r){return JSON.stringify(r)}function Ct(r){try{return JSON.parse(r)}catch{return null}}function Je(r){try{localStorage.setItem(Ze,Jt(r))}catch{}}function Ft(){try{const r=localStorage.getItem(Ze);return r?Ct(r):null}catch{return null}}function ut(){return{root:X("/",[X("bin",[N("ls",""),N("cat",""),N("echo",""),N("pwd",""),N("cd",""),N("ip","")]),X("usr",[X("bin",[N("node",""),N("bash","")]),X("share",[N("dict.txt","why are you looking here >:(")])]),X("var",[X("log",[N("auth.log","accepted connection"),N("kern.log","boot ok")]),X("tmp")]),X("proc",[N("cpuinfo","cpu: webasm"),N("meminfo","mem: virtual")]),X("etc",[N("hostname",`jndl
`),N("hosts",`127.0.0.1 localhost
::1 localhost
`),N("os-release",`NAME=Web
ID=web`)]),X("home",[X("alex",[N("README.md",`# Alexander Jandl

Welcome to my terminal. Try \`help\` to see commands.

Useful places:
- ~/about.txt
- ~/skills.md
- ~/projects
`),N("about.txt","Infrastructure & security focused engineer based in Bratislava. I like reliable automation, scalable systems, and cats."),N("skills.md",`- Linux, networking, network security
- AWS & Azure platform security
- Scripting: Bash, Python, Powershell, C
- Zero-trust, identity, and least privilege`),{...N("blog","Open the personal blog"),link:"/blog"},X("projects",[{...N("persephone",`personal webpage, vibecoded from scratch.
i don't know any frontend :D`),link:"https://github.com/xdsai/persephone"}]),X("socials",[{...N("github","my github profile"),link:"https://github.com/xdsai"},{...N("linkedin","my linkedin profile"),link:"https://www.linkedin.com/in/jndl/"},{...N("email","email me something nice! no nigerian princes please"),link:"mailto:alex@jndl.dev"}])])]),X("tmp")]),cwd:"/home/alex"}}function Be(r){if(!r)return"/";let e=r.replace(/\\/g,"/");e.startsWith("/")||(e="/"+e);const t=[];for(const n of e.split("/"))!n||n==="."||(n===".."?t.pop():t.push(n));return"/"+t.join("/")}function me(r,e){return!e||e==="."?Be(r):e.startsWith("/")?Be(e):Be(r+"/"+e)}function Se(r,e){const t=Be(e).split("/").filter(Boolean);if(t.length===0)return{node:r,parent:null};let n=r,s=null,l=r;for(const a of t){if(!n)return{node:null,parent:null};const h=n.children.find(v=>v.name===a)||null;if(s=n,l=h,!h)return{node:null,parent:s};n=h.type==="dir"?h:null}return{node:l,parent:s}}function Ue(r,e,t=!1){const n=Be(e);if(n==="/")return{node:r,created:!1};const s=n.split("/").filter(Boolean);let l=r,a=!1;for(const h of s){let v=l.children.find(w=>w.name===h);if(!v){if(!t)return{node:null,created:a};v=X(h),l.children.push(v),a=!0}if(v.type!=="dir")return{node:null,created:a};l=v}return{node:l,created:a}}function Mt(r,e,t=!1){const{node:n,parent:s}=Se(r,e);if(!n||!s||n.type==="dir"&&n.children.length&&!t)return!1;const l=s.children.findIndex(a=>a.name===n.name);return l>=0&&s.children.splice(l,1),!0}function dt(r,e,t){const n=r.slice();return n[59]=e[t],n}function ft(r,e,t){const n=r.slice();return n[62]=e[t],n}function ht(r){let e,t=r[62].html+"";return{c(){e=g("div"),this.h()},l(n){e=b(n,"DIV",{class:!0});var s=y(e);s.forEach(m),this.h()},h(){d(e,"class","row svelte-1mt2qmb")},m(n,s){ge(n,e,s),e.innerHTML=t},p(n,s){s[0]&32&&t!==(t=n[62].html+"")&&(e.innerHTML=t)},d(n){n&&m(e)}}}function pt(r){let e,t,n,s,l,a,h,v,w,H,ee,te,J;return H=new Bt({props:{src:"/story.json"}}),{c(){e=g("div"),t=g("div"),n=g("div"),s=R("NEON THIRTEEN — PERSEPHONE RUN"),l=F(),a=g("button"),h=R("×"),v=F(),w=g("div"),wt(H.$$.fragment),this.h()},l(D){e=b(D,"DIV",{class:!0,role:!0,"aria-label":!0});var ne=y(e);t=b(ne,"DIV",{class:!0});var j=y(t);n=b(j,"DIV",{class:!0});var W=y(n);s=G(W,"NEON THIRTEEN — PERSEPHONE RUN"),W.forEach(m),l=M(j),a=b(j,"BUTTON",{class:!0,"aria-label":!0});var O=y(a);h=G(O,"×"),O.forEach(m),v=M(j),w=b(j,"DIV",{class:!0});var x=y(w);Et(H.$$.fragment,x),x.forEach(m),j.forEach(m),ne.forEach(m),this.h()},h(){d(n,"class","obartitle svelte-1mt2qmb"),d(a,"class","close svelte-1mt2qmb"),d(a,"aria-label","close"),d(w,"class","content svelte-1mt2qmb"),d(t,"class","box svelte-1mt2qmb"),d(e,"class","overlay svelte-1mt2qmb"),d(e,"role","dialog"),d(e,"aria-label","persephone game")},m(D,ne){ge(D,e,ne),i(e,t),i(t,n),i(n,s),i(t,l),i(t,a),i(a,h),i(t,v),i(t,w),It(H,w,null),ee=!0,te||(J=[$(a,"click",r[32]),$(t,"click",Ae(r[26])),$(t,"keydown",Ae(r[27])),$(e,"click",Ae(r[24])),$(e,"keydown",Ae(r[25]))],te=!0)},p:Me,i(D){ee||(We(H.$$.fragment,D),ee=!0)},o(D){Ce(H.$$.fragment,D),ee=!1},d(D){D&&m(e),Nt(H),te=!1,Qe(J)}}}function mt(r){let e,t,n,s,l,a,h,v,w,H,ee,te,J,D=JSON.stringify(r[14],null,2)+"",ne,j,W,O,x,ue,Y,S,U,z,oe,se,be,A,he;function le(C,Q){return C[9]?Ut:zt}let de=le(r),q=de(r);return{c(){e=g("div"),t=g("div"),n=g("div"),s=R("Signal Bloom — ARG Panel"),l=F(),a=g("button"),h=R("×"),v=F(),w=g("div"),H=g("div"),ee=R("Steganographic shards"),te=F(),J=g("pre"),ne=R(D),j=F(),W=g("div"),O=g("div"),x=R("Discovered lore"),ue=F(),q.c(),Y=F(),S=g("div"),U=g("a"),z=R("Resume Story"),oe=F(),se=g("a"),be=R("Open blog entry"),this.h()},l(C){e=b(C,"DIV",{class:!0,role:!0,"aria-label":!0});var Q=y(e);t=b(Q,"DIV",{class:!0});var Z=y(t);n=b(Z,"DIV",{class:!0});var ve=y(n);s=G(ve,"Signal Bloom — ARG Panel"),ve.forEach(m),l=M(Z),a=b(Z,"BUTTON",{class:!0,"aria-label":!0});var ie=y(a);h=G(ie,"×"),ie.forEach(m),v=M(Z),w=b(Z,"DIV",{class:!0});var pe=y(w);H=b(pe,"DIV",{class:!0});var qe=y(H);ee=G(qe,"Steganographic shards"),qe.forEach(m),te=M(pe),J=b(pe,"PRE",{class:!0});var fe=y(J);ne=G(fe,D),fe.forEach(m),pe.forEach(m),j=M(Z),W=b(Z,"DIV",{class:!0});var T=y(W);O=b(T,"DIV",{class:!0});var P=y(O);x=G(P,"Discovered lore"),P.forEach(m),ue=M(T),q.l(T),T.forEach(m),Y=M(Z),S=b(Z,"DIV",{class:!0});var K=y(S);U=b(K,"A",{class:!0,href:!0});var _=y(U);z=G(_,"Resume Story"),_.forEach(m),oe=M(K),se=b(K,"A",{class:!0,href:!0});var V=y(se);be=G(V,"Open blog entry"),V.forEach(m),K.forEach(m),Z.forEach(m),Q.forEach(m),this.h()},h(){d(n,"class","obartitle svelte-1mt2qmb"),d(a,"class","close svelte-1mt2qmb"),d(a,"aria-label","close"),d(H,"class","arghead svelte-1mt2qmb"),d(J,"class","payload svelte-1mt2qmb"),d(w,"class","argsec svelte-1mt2qmb"),d(O,"class","arghead svelte-1mt2qmb"),d(W,"class","argsec svelte-1mt2qmb"),d(U,"class","nav svelte-1mt2qmb"),d(U,"href","/blog/neon-thirteen-persephone-run#persephone"),d(se,"class","nav svelte-1mt2qmb"),d(se,"href","/blog/neon-thirteen-persephone-run"),d(S,"class","argsec links svelte-1mt2qmb"),d(t,"class","box arg svelte-1mt2qmb"),d(e,"class","overlay svelte-1mt2qmb"),d(e,"role","dialog"),d(e,"aria-label","ARG panel")},m(C,Q){ge(C,e,Q),i(e,t),i(t,n),i(n,s),i(t,l),i(t,a),i(a,h),i(t,v),i(t,w),i(w,H),i(H,ee),i(w,te),i(w,J),i(J,ne),i(t,j),i(t,W),i(W,O),i(O,x),i(W,ue),q.m(W,null),i(t,Y),i(t,S),i(S,U),i(U,z),i(S,oe),i(S,se),i(se,be),A||(he=[$(a,"click",r[33]),$(t,"click",Ae(r[22])),$(t,"keydown",Ae(r[23])),$(e,"click",Ae(r[20])),$(e,"keydown",Ae(r[21]))],A=!0)},p(C,Q){de===(de=le(C))&&q?q.p(C,Q):(q.d(1),q=de(C),q&&(q.c(),q.m(W,null)))},d(C){C&&m(e),q.d(),A=!1,Qe(he)}}}function zt(r){let e,t;return{c(){e=g("div"),t=R("no registry"),this.h()},l(n){e=b(n,"DIV",{class:!0});var s=y(e);t=G(s,"no registry"),s.forEach(m),this.h()},h(){d(e,"class","dim")},m(n,s){ge(n,e,s),i(e,t)},p:Me,d(n){n&&m(e)}}}function Ut(r){let e;function t(l,a){var h,v,w;return(w=(v=(h=l[10])==null?void 0:h.state)==null?void 0:v.loreDiscoveries)!=null&&w.length?Yt:xt}let n=t(r),s=n(r);return{c(){s.c(),e=ct()},l(l){s.l(l),e=ct()},m(l,a){s.m(l,a),ge(l,e,a)},p(l,a){n===(n=t(l))&&s?s.p(l,a):(s.d(1),s=n(l),s&&(s.c(),s.m(e.parentNode,e)))},d(l){s.d(l),l&&m(e)}}}function xt(r){let e,t;return{c(){e=g("div"),t=R("no lore discovered"),this.h()},l(n){e=b(n,"DIV",{class:!0});var s=y(e);t=G(s,"no lore discovered"),s.forEach(m),this.h()},h(){d(e,"class","dim")},m(n,s){ge(n,e,s),i(e,t)},p:Me,d(n){n&&m(e)}}}function Yt(r){let e,t=r[15](r[10]),n=[];for(let s=0;s<t.length;s+=1)n[s]=bt(dt(r,t,s));return{c(){e=g("ul");for(let s=0;s<n.length;s+=1)n[s].c()},l(s){e=b(s,"UL",{});var l=y(e);for(let a=0;a<n.length;a+=1)n[a].l(l);l.forEach(m)},m(s,l){ge(s,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null)},p(s,l){if(l[0]&33792){t=s[15](s[10]);let a;for(a=0;a<t.length;a+=1){const h=dt(s,t,a);n[a]?n[a].p(h,l):(n[a]=bt(h),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(s){s&&m(e),kt(n,s)}}}function gt(r){let e,t,n=r[59].summary+"",s;return{c(){e=g("span"),t=R("— "),s=R(n),this.h()},l(l){e=b(l,"SPAN",{class:!0});var a=y(e);t=G(a,"— "),s=G(a,n),a.forEach(m),this.h()},h(){d(e,"class","lsum svelte-1mt2qmb")},m(l,a){ge(l,e,a),i(e,t),i(e,s)},p(l,a){a[0]&1024&&n!==(n=l[59].summary+"")&&Le(s,n)},d(l){l&&m(e)}}}function bt(r){let e,t,n=r[59].title+"",s,l=r[59].summary&&gt(r);return{c(){e=g("li"),t=g("span"),s=R(n),l&&l.c(),this.h()},l(a){e=b(a,"LI",{});var h=y(e);t=b(h,"SPAN",{class:!0});var v=y(t);s=G(v,n),v.forEach(m),l&&l.l(h),h.forEach(m),this.h()},h(){d(t,"class","ltitle svelte-1mt2qmb")},m(a,h){ge(a,e,h),i(e,t),i(t,s),l&&l.m(e,null)},p(a,h){h[0]&1024&&n!==(n=a[59].title+"")&&Le(s,n),a[59].summary?l?l.p(a,h):(l=gt(a),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(a){a&&m(e),l&&l.d()}}}function Qt(r){let e,t,n,s,l,a,h,v,w,H,ee,te,J=Ye(r[0].cwd)+"",D,ne,j,W,O,x,ue,Y,S,U,z,oe,se,be,A,he,le,de,q,C,Q,Z,ve,ie,pe,qe,fe=r[5],T=[];for(let _=0;_<fe.length;_+=1)T[_]=ht(ft(r,fe,_));let P=r[7]&&pt(r),K=r[8]&&mt(r);return{c(){e=g("div"),t=g("div"),n=g("div"),s=g("span"),l=g("span"),a=g("span"),h=F(),v=g("span"),w=R(Ke),H=R("@"),ee=R(xe),te=R(" — "),D=R(J),ne=F(),j=g("span"),W=R("up "),O=R(r[4]),x=R(" min"),ue=F(),Y=g("div"),S=g("div");for(let _=0;_<T.length;_+=1)T[_].c();U=F(),z=g("div"),oe=g("span"),se=R(r[11]),be=F(),A=g("input"),he=F(),le=g("div"),de=F(),q=g("div"),C=F(),Q=g("div"),Z=F(),P&&P.c(),ve=F(),K&&K.c(),this.h()},l(_){e=b(_,"DIV",{class:!0,tabindex:!0,role:!0,"aria-label":!0});var V=y(e);t=b(V,"DIV",{class:!0});var I=y(t);n=b(I,"DIV",{class:!0});var ye=y(n);s=b(ye,"SPAN",{class:!0}),y(s).forEach(m),l=b(ye,"SPAN",{class:!0}),y(l).forEach(m),a=b(ye,"SPAN",{class:!0}),y(a).forEach(m),ye.forEach(m),h=M(I),v=b(I,"SPAN",{class:!0,style:!0});var ke=y(v);w=G(ke,Ke),H=G(ke,"@"),ee=G(ke,xe),te=G(ke," — "),D=G(ke,J),ke.forEach(m),ne=M(I),j=b(I,"SPAN",{class:!0});var je=y(j);W=G(je,"up "),O=G(je,r[4]),x=G(je," min"),je.forEach(m),I.forEach(m),ue=M(V),Y=b(V,"DIV",{class:!0});var we=y(Y);S=b(we,"DIV",{class:!0});var Ee=y(S);for(let Re=0;Re<T.length;Re+=1)T[Re].l(Ee);U=M(Ee),z=b(Ee,"DIV",{class:!0});var Oe=y(z);oe=b(Oe,"SPAN",{class:!0,"aria-hidden":!0});var He=y(oe);se=G(He,r[11]),He.forEach(m),be=M(Oe),A=b(Oe,"INPUT",{class:!0,type:!0,spellcheck:!0,autocapitalize:!0,autocomplete:!0,autocorrect:!0}),Oe.forEach(m),he=M(Ee),le=b(Ee,"DIV",{class:!0,"aria-hidden":!0}),y(le).forEach(m),Ee.forEach(m),de=M(we),q=b(we,"DIV",{class:!0,"aria-hidden":!0}),y(q).forEach(m),C=M(we),Q=b(we,"DIV",{class:!0,"aria-hidden":!0}),y(Q).forEach(m),we.forEach(m),Z=M(V),P&&P.l(V),ve=M(V),K&&K.l(V),V.forEach(m),this.h()},h(){d(s,"class","dot r svelte-1mt2qmb"),d(l,"class","dot y svelte-1mt2qmb"),d(a,"class","dot g svelte-1mt2qmb"),d(n,"class","controls svelte-1mt2qmb"),d(v,"class","title svelte-1mt2qmb"),d(v,"style",`animation: glitch ${r[12].toFixed(2)}s infinite steps(2); animation-delay:${r[13].toFixed(2)}s`),d(j,"class","uptime svelte-1mt2qmb"),d(t,"class","titlebar svelte-1mt2qmb"),d(oe,"class","prompt svelte-1mt2qmb"),d(oe,"aria-hidden","true"),d(A,"class","readline svelte-1mt2qmb"),d(A,"type","text"),d(A,"spellcheck","false"),d(A,"autocapitalize","off"),d(A,"autocomplete","off"),d(A,"autocorrect","off"),d(z,"class","row input svelte-1mt2qmb"),d(le,"class","end svelte-1mt2qmb"),d(le,"aria-hidden","true"),d(S,"class","terminal svelte-1mt2qmb"),d(q,"class","fx fx-scan svelte-1mt2qmb"),d(q,"aria-hidden","true"),d(Q,"class","fx fx-noise svelte-1mt2qmb"),d(Q,"aria-hidden","true"),d(Y,"class","term-pane svelte-1mt2qmb"),d(e,"class","terminal-wrap svelte-1mt2qmb"),d(e,"tabindex","0"),d(e,"role","group"),d(e,"aria-label","web terminal")},m(_,V){ge(_,e,V),i(e,t),i(t,n),i(n,s),i(n,l),i(n,a),i(t,h),i(t,v),i(v,w),i(v,H),i(v,ee),i(v,te),i(v,D),i(t,ne),i(t,j),i(j,W),i(j,O),i(j,x),i(e,ue),i(e,Y),i(Y,S);for(let I=0;I<T.length;I+=1)T[I]&&T[I].m(S,null);i(S,U),i(S,z),i(z,oe),i(oe,se),i(z,be),i(z,A),r[28](A),at(A,r[3]),i(S,he),i(S,le),r[30](le),r[31](S),i(Y,de),i(Y,q),i(Y,C),i(Y,Q),i(e,Z),P&&P.m(e,null),i(e,ve),K&&K.m(e,null),ie=!0,pe||(qe=[$(A,"input",r[29]),$(A,"keydown",r[17]),$(S,"click",r[18]),$(S,"keydown",r[19]),$(e,"click",r[16]),$(e,"keydown",r[34])],pe=!0)},p(_,V){if((!ie||V[0]&1)&&J!==(J=Ye(_[0].cwd)+"")&&Le(D,J),(!ie||V[0]&16)&&Le(O,_[4]),V[0]&32){fe=_[5];let I;for(I=0;I<fe.length;I+=1){const ye=ft(_,fe,I);T[I]?T[I].p(ye,V):(T[I]=ht(ye),T[I].c(),T[I].m(S,U))}for(;I<T.length;I+=1)T[I].d(1);T.length=fe.length}(!ie||V[0]&2048)&&Le(se,_[11]),V[0]&8&&A.value!==_[3]&&at(A,_[3]),_[7]?P?(P.p(_,V),V[0]&128&&We(P,1)):(P=pt(_),P.c(),We(P,1),P.m(e,ve)):P&&(Rt(),Ce(P,1,1,()=>{P=null}),Gt()),_[8]?K?K.p(_,V):(K=mt(_),K.c(),K.m(e,null)):K&&(K.d(1),K=null)},i(_){ie||(We(P),ie=!0)},o(_){Ce(P),ie=!1},d(_){_&&m(e),kt(T,_),r[28](null),r[30](null),r[31](null),P&&P.d(),K&&K.d(),pe=!1,Qe(qe)}}}let xe="jndl",Ke="alex";function Ye(r){const e="/home/"+Ke;return r===e?"~":r.startsWith(e+"/")?"~"+r.slice(e.length):r}function Zt(r){const e=[];let t="",n=!1;for(let s=0;s<r.length;s++){const l=r[s];if(l==='"'){n=!n;continue}if(!n&&/\s/.test(l)){t&&(e.push(t),t="");continue}t+=l}return t&&e.push(t),e}function Ve(r){return r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Xt(r){return r==="~"||r.startsWith("~/")?"/home/"+Ke+(r.length>1?r.slice(1):""):r}function $t(r){if(!r.length)return"";let e=r[0];for(const t of r.slice(1)){let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];)n++;if(e=e.slice(0,n),!e)break}return e}function*Dt(r,e){for(const t of r.children){const n=t.type==="dir";yield`${e}${t.name}${n?"/":""}`,n&&(yield*Dt(t,e+"  "))}}function en(r,e,t){let n,s=ut(),l,a,h="",v=[],w=-1;const H=new Date;let ee=0,te=null,J=[],D;const ne={help:"help — list available commands",ls:"ls [path] — list directory contents (click names to open)",tree:"tree [path] — show directory tree",pwd:"pwd — print working directory",cd:"cd <path> — change directory",cat:"cat <file> — print file to terminal",echo:'echo "text" > file — write or append with >>',touch:"touch <file> — create an empty file",mkdir:"mkdir [-p] <dir> — create directory",rm:"rm [-r] <path> — remove file or directory",clear:"clear — clear the screen",whoami:"whoami — print current user",date:"date — print current date/time",uname:"uname — print kernel info",ip:"ip — print public IP address",man:"man <cmd> — show a short description",resetfs:"resetfs — reset filesystem to defaults (clears local storage)",play:"play — open the Persephone story",save:"save — save current Persephone run",load:"load — load saved Persephone run",reset:"reset — reset Persephone run","whois nine":"whois nine — protagonist dossier"};let j=!1,W=!1,O=null,x=null,ue=null;const Y=4+Math.random()*4,S=Math.random()*3;function U(){try{const o=localStorage.getItem(Pe);t(10,ue=o?JSON.parse(o):null)}catch{t(10,ue=null)}}async function z(){var o,f;if(!O){try{const p=await fetch("/story.json");if(p.ok){const u=await p.json();O=u.meta||null,t(9,x=((o=u.meta)==null?void 0:o.loreRegistry)||null);return}}catch{}try{const u=await(await fetch("/assets/persephone-run.json")).json();O=u.meta||null,t(9,x=((f=u.meta)==null?void 0:f.loreRegistry)||null)}catch{}}}const oe={status:"decrypted",shards:6,hint:"six seeds bloom a signal",routes:["/blog/welcome","/"]};function se(o){var f;try{const p=((f=o==null?void 0:o.state)==null?void 0:f.loreDiscoveries)||[];return!Array.isArray(p)||!x?[]:p.map(u=>x.find(k=>k.slug===u)).filter(Boolean)}catch{return[]}}function be(){const o=Ft();o?t(0,s=o):Je(s),q('<span class="g">Welcome</span> — type <span class="y">help</span> to get started.'),q(`<div class="onboard">Quick start:
      <a href="#" class="cmd" data-cmd="ls">list files</a>
      · <a href="#" class="cmd" data-cmd="play">play the story</a>
      · <a href="/blog" class="nav">blog</a>
      <div class="hint">Tip: use <b>ls</b> to list, <b>cat &lt;file&gt;</b> to read, <b>cd &lt;dir&gt;</b> to open</div>
    </div>`)}function A(){a==null||a.focus()}let he=null;function le(o=3){!l||l.scrollHeight-l.scrollTop-l.clientHeight<2||(t(1,l.scrollTop=l.scrollHeight,l),o>0&&requestAnimationFrame(()=>le(o-1)))}function de(){D!=null&&D.scrollIntoView&&D.scrollIntoView({block:"end"}),he&&cancelAnimationFrame(he),he=requestAnimationFrame(()=>le(2))}function q(o){t(5,J=[...J,{html:o}]),it().then(()=>{de()})}async function C(o){var L,re,ae,Ge,Ie,Xe,$e,et,tt,nt,rt,st,ot;const f=o.trim();if(q(`<span class="cmdline"><span class="prompt">${Ve(n)}</span> <span class="cmdtext">${Ve(o)}</span></span>`),!f)return;v.push(o),w=v.length;const[p,...u]=Zt(f),k=[],c=(Ne,_e=!1)=>k.push({text:Ne,raw:_e});try{const Ne=(p||"").toLowerCase(),_e=u.map(B=>(B||"").toLowerCase());switch(Ne){case"help":c(Object.keys(ne).join(", "));break;case"pwd":c(s.cwd);break;case"whoami":c(Ke);break;case"date":c(new Date().toString());break;case"uname":c("Linux persephone 6.1.0 x86_64 (web)");break;case"ip":{try{const E=await(await fetch("https://api.ipify.org?format=json",{cache:"no-store"})).json();c(`public: ${E.ip}`)}catch{c("ip: unable to fetch external IP")}break}case"clear":t(5,J=[]),await it(),de(),A();break;case"cd":ve(u,c);break;case"ls":ie(u,c);break;case"tree":pe(u,c);break;case"cat":qe(u,c);break;case"echo":fe(u,c);break;case"touch":T(u,c);break;case"mkdir":P(u,c);break;case"rm":K(u,c);break;case"resetfs":{Ht(),t(0,s=ut()),Je(s),c("filesystem reset to defaults");break}case"man":{const B=u[0];if(!B){c("man: missing command");break}const E=ne[B];c(E||`No manual entry for ${B}`);break}case"play":{await z(),t(7,j=!0),c("opening game…");break}case"save":{c("persephone: auto-saved (if a run is in progress).");break}case"load":{if(!!!localStorage.getItem(Pe)){c("persephone: no save found");break}t(7,j=!0),c("persephone: loaded (open window).");break}case"reset":{localStorage.removeItem(Pe),c("persephone: save cleared");break}case"whois":{await z();const B=(_e[0]||"").toLowerCase();if(B==="nine"||B==="alex")try{const E=localStorage.getItem(Pe),ce=E?JSON.parse(E):null,Te=!!((re=(L=ce==null?void 0:ce.state)==null?void 0:L.flags)!=null&&re.ghostKey),lt=(O==null?void 0:O.date)||"2077-08-13";c(`name: Nine
role: protagonist
op: Vault Night ${lt}
status: ${Te?"confirmed: Ghost Key acquired":"linked: Ghost Key operation in progress"}
notes: ${Te?"Protagonist who slipped into Acheron’s vault and pocketed the Ghost Key during Vault Night.":"Protagonist preparing a breach on Acheron’s vault to lift the Ghost Key."}`)}catch{c(`name: Nine
role: protagonist
notes: linked to the Ghost Key breach on Vault Night.`)}else if(B==="johnny")try{const E=localStorage.getItem("persephone-run-v1:save"),ce=E?JSON.parse(E):null,Te=!!(((ae=ce==null?void 0:ce.state)==null?void 0:ae.loreDiscoveries)||[]).includes("johnny-silverhand");c(Te?"record shows JOHNNY S— (silver tape wrapped on right hand).":"record incomplete.")}catch{c("record incomplete.")}else c("whois: try `whois nine`");break}case"persephone":{if(_e[0]==="--bloom"){await z();try{const B=localStorage.getItem(Pe);if(!B){c("no bloom: signal dormant");break}const E=JSON.parse(B);!!((Ie=(Ge=E==null?void 0:E.state)==null?void 0:Ge.flags)!=null&&Ie.blogPosted)&&(($e=(Xe=E==null?void 0:E.state)==null?void 0:Xe.flags)==null?void 0:$e.blogClean)===!1?(t(8,W=!0),c("bloom: signal decrypted (open panel)"),U()):c("no bloom: signal dormant")}catch{c("no bloom: signal dormant")}}else c("persephone: unknown flag");break}case"pomegranate":case"kore13":{await z();try{const B=localStorage.getItem(Pe);if(!B){c("no bloom: signal dormant");break}const E=JSON.parse(B);!!((tt=(et=E==null?void 0:E.state)==null?void 0:et.flags)!=null&&tt.blogPosted)&&((rt=(nt=E==null?void 0:E.state)==null?void 0:nt.flags)==null?void 0:rt.blogClean)===!1?(t(8,W=!0),c("bloom: signal decrypted (open panel)"),U()):c("no bloom: signal dormant")}catch{c("no bloom: signal dormant")}break}default:if(Ne+" "+(_e[0]||"")=="whois nine"){await z();try{const B=localStorage.getItem(Pe),E=B?JSON.parse(B):null,ce=!!((ot=(st=E==null?void 0:E.state)==null?void 0:st.flags)!=null&&ot.ghostKey),Te=(O==null?void 0:O.date)||"2077-08-13";c(`name: Nine
role: protagonist
op: Vault Night ${Te}
status: ${ce?"confirmed: Ghost Key acquired":"linked: Ghost Key operation in progress"}
notes: ${ce?"Protagonist who slipped into Acheron’s vault and pocketed the Ghost Key during Vault Night.":"Protagonist preparing a breach on Acheron’s vault to lift the Ghost Key."}`)}catch{c(`name: Nine
role: protagonist
notes: linked to the Ghost Key breach on Vault Night.`)}}else c(`${p}: command not found`)}}catch(Ne){c(String(Ne))}if(k.length){const Ne=k.map(_e=>_e.raw?_e.text:Ve(_e.text)).join(`
`);q(Ne)}Je(s)}function Q(o){const f=Xt(o),p=f.startsWith("/")?f:me(s.cwd,f),u=p.endsWith("/"),k=u?p:p.substring(0,p.lastIndexOf("/")>=0?p.lastIndexOf("/"):0),c=u?"":p.split("/").pop()||"",L=Se(s.root,k||"/").node;if(!L||L.type!=="dir")return{next:null,suggestions:[]};const ae=L.children.map(Ie=>Ie.type==="dir"?Ie.name+"/":Ie.name).filter(Ie=>Ie.startsWith(c));if(ae.length===0)return{next:null,suggestions:[]};if(ae.length===1)return{next:u?p:k+"/"+ae[0],suggestions:ae};const Ge=$t(ae);return Ge.length>c.length?{next:k+"/"+Ge,suggestions:ae}:{next:null,suggestions:ae}}function Z(){let o=!1,f=-1;for(let L=0;L<h.length;L++){const re=h[L];re==='"'&&(o=!o),!o&&/\s/.test(re)&&(f=L)}const p=h.slice(0,f+1),u=h.slice(f+1);if(!u)return;const{next:k,suggestions:c}=Q(u);if(k){const L=k.startsWith(s.cwd)?k.replace(s.cwd,"").replace(/^\//,""):k;t(3,h=p+L);return}c.length&&q(c.join("  "))}function ve(o,f){const p=me(s.cwd,o[0]??"/"),u=Se(s.root,p);if(!u.node)return f(`cd: no such file or directory: ${o[0]??"/"}`);if(u.node.type!=="dir")return f(`cd: not a directory: ${o[0]}`);t(0,s.cwd=p,s)}function ie(o,f){const p=me(s.cwd,o[0]??"."),{node:u}=Se(s.root,p);if(!u)return f(`ls: cannot access '${o[0]??"."}': No such file or directory`);if(u.type==="file")return f(u.name);me("/",p);const k=u.children.map(c=>{const L=c.type==="dir"?c.name+"/":c.name;if(c.type==="dir")return Ve(L);const re=c;return re.link?`<a href="${re.link}" class="nav">${Ve(L)}</a>`:Ve(L)}).join("  ");f(k,!0)}function pe(o,f){const p=me(s.cwd,o[0]??"."),{node:u}=Se(s.root,p);if(!u)return f(`tree: ${o[0]??"."}: No such file or directory`);if(u.type==="file")return f(u.name);f(u.name||"/"),f([...Dt(u,"  ")].join(`
`))}function qe(o,f){if(!o[0])return f("cat: missing file operand");const p=me(s.cwd,o[0]),{node:u}=Se(s.root,p);if(!u)return f(`cat: ${o[0]}: No such file or directory`);if(u.type!=="file")return f(`cat: ${o[0]}: Is a directory`);f(u.content)}function fe(o,f){const p=o.findIndex(u=>u===">"||u===">>");if(p>=0){const u=o.slice(0,p).join(" "),k=o[p]===">>",c=o[p+1];if(!c)return f("echo: redirection needs a file");const L=me(s.cwd,c),re=Se(s.root,L);if(!re.node){const ae=Ue(s.root,L.substring(0,L.lastIndexOf("/")),!0).node;if(!ae)return f(`echo: cannot create file '${c}'`);ae.children.push(N(L.split("/").pop()||"file.txt",u+(k?"":`
`))),Je(s);return}if(re.node.type!=="file")return f(`echo: ${c}: Is a directory`);re.node.content=k?re.node.content+u:u+`
`,re.node.updatedAt=Fe();return}f(o.join(" "))}function T(o,f){if(!o[0])return f("touch: missing file operand");const p=me(s.cwd,o[0]),u=Se(s.root,p);if(!u.node){const k=p.substring(0,p.lastIndexOf("/"))||"/",{node:c}=Ue(s.root,k,!0);if(!c)return f(`touch: cannot create '${o[0]}'`);c.children.push(N(p.split("/").pop()||"file.txt",""));return}if(u.node.type!=="file")return f(`touch: ${o[0]}: Is a directory`);u.node.updatedAt=Fe()}function P(o,f){if(!o[0])return f("mkdir: missing operand");const p=o[0]==="-p",u=p?o[1]:o[0];if(!u)return f("mkdir: missing operand");const k=me(s.cwd,u);if(!Ue(s.root,k,p).node)return f(`mkdir: cannot create directory '${u}'`)}function K(o,f){if(!o[0])return f("rm: missing operand");const p=o[0]==="-r",u=p?o[1]:o[0],k=me(s.cwd,u);Mt(s.root,k,p)||f(`rm: cannot remove '${u}'`)}function _(o){if(o.key==="Enter"){o.preventDefault();const f=h;t(3,h=""),C(f)}else o.key==="ArrowUp"?(w>0&&(w-=1,t(3,h=v[w]??"")),o.preventDefault()):o.key==="ArrowDown"?(w<v.length&&(w+=1,t(3,h=v[w]??"")),o.preventDefault()):o.key==="c"&&(o.ctrlKey||o.metaKey)?(q('<span class="prompt">'+n+"</span> "+Ve(h)),t(3,h=""),o.preventDefault()):o.key==="Tab"&&(o.preventDefault(),Z())}function V(o){const f=o.target,p=f.closest("a.cmd");if(p){o.preventDefault();const k=p.getAttribute("data-cmd")||"";k&&C(k);return}const u=f.closest("a.nav");if(u){o.preventDefault();const k=u.getAttribute("href")||"";k&&(window.location.href=k);return}A()}function I(o){const f=o.target;if(!(o.key==="Enter"||o.key===" "))return;const u=f.closest("a.cmd"),k=f.closest("a.nav");if(u){o.preventDefault();const c=u.getAttribute("data-cmd")||"";c&&C(c);return}if(k){o.preventDefault();const c=k.getAttribute("href")||"";c&&(window.location.href=c)}}Lt(()=>{be(),A();const o=()=>{t(4,ee=Math.floor((Date.now()-H.getTime())/6e4))};o(),te=setInterval(o,1e4),typeof window<"u"&&window.addEventListener("persephone:save",U)}),Wt(()=>{te&&clearInterval(te),typeof window<"u"&&window.removeEventListener("persephone:save",U)});function ye(o){De.call(this,r,o)}function ke(o){De.call(this,r,o)}function je(o){De.call(this,r,o)}function we(o){De.call(this,r,o)}function Ee(o){De.call(this,r,o)}function Oe(o){De.call(this,r,o)}function He(o){De.call(this,r,o)}function Re(o){De.call(this,r,o)}function St(o){ze[o?"unshift":"push"](()=>{a=o,t(2,a)})}function At(){h=this.value,t(3,h)}function qt(o){ze[o?"unshift":"push"](()=>{D=o,t(6,D)})}function Pt(o){ze[o?"unshift":"push"](()=>{l=o,t(1,l)})}const Vt=()=>t(7,j=!1),jt=()=>t(8,W=!1),Ot=o=>{(o.key.length===1||o.key==="/"||o.key===" ")&&A()};return r.$$.update=()=>{r.$$.dirty[0]&1&&t(11,n=`${Ke}@${xe}:${Ye(s.cwd)}$`)},[s,l,a,h,ee,J,D,j,W,x,ue,n,Y,S,oe,se,A,_,V,I,ye,ke,je,we,Ee,Oe,He,Re,St,At,qt,Pt,Vt,jt,Ot]}class tn extends vt{constructor(e){super(),yt(this,e,en,Qt,_t,{},null,[-1,-1,-1])}}function nn(r){let e,t;return e=new tn({}),{c(){wt(e.$$.fragment)},l(n){Et(e.$$.fragment,n)},m(n,s){It(e,n,s),t=!0},p:Me,i(n){t||(We(e.$$.fragment,n),t=!0)},o(n){Ce(e.$$.fragment,n),t=!1},d(n){Nt(e,n)}}}class ln extends vt{constructor(e){super(),yt(this,e,null,nn,_t,{})}}export{ln as default};
