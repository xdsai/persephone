import{S as Ie,i as De,s as Ee,k as j,a as le,q as L,l as N,m as P,h as E,c as ae,r as V,n as w,b as Se,G as y,J as we,K as X,u as pe,H as me,L as Ne,M as Te,o as Pe,N as We,t as Oe,w as ve,y as Me,z as ze,A as $e,g as Be,d as Ke,B as Le}from"../chunks/index.17bb44e0.js";const be="persephone.fs.v1";function Ve(){try{localStorage.removeItem(be)}catch{}}function de(){return Date.now()}function A(t,n=[]){const r=de();return{name:t,type:"dir",children:n,createdAt:r,updatedAt:r}}function p(t,n=""){const r=de();return{name:t,type:"file",content:n,createdAt:r,updatedAt:r}}function Ce(t){return JSON.stringify(t)}function He(t){try{return JSON.parse(t)}catch{return null}}function fe(t){try{localStorage.setItem(be,Ce(t))}catch{}}function Fe(){try{const t=localStorage.getItem(be);return t?He(t):null}catch{return null}}function _e(){return{root:A("/",[A("bin",[p("ls",""),p("cat",""),p("echo",""),p("pwd",""),p("cd",""),p("ip","")]),A("usr",[A("bin",[p("node",""),p("bash","")]),A("share",[p("dict.txt","why are you looking here >:(")])]),A("var",[A("log",[p("auth.log","accepted connection"),p("kern.log","boot ok")]),A("tmp")]),A("proc",[p("cpuinfo","cpu: webasm"),p("meminfo","mem: virtual")]),A("etc",[p("hostname",`jndl
`),p("hosts",`127.0.0.1 localhost
::1 localhost
`),p("os-release",`NAME=Web
ID=web`)]),A("home",[A("alex",[p("README.md",`# Alexander Jandl

Welcome to my terminal. Try \`help\` to see commands.

Useful places:
- ~/about.txt
- ~/skills.md
- ~/projects
`),p("about.txt","Infrastructure & security focused engineer based in Bratislava. I like reliable automation, scalable systems, and cats."),p("skills.md",`- Linux, networking, network security
- AWS & Azure platform security
- Scripting: Bash, Python, Powershell, C
- Zero-trust, identity, and least privilege`),{...p("blog","Open the personal blog"),link:"/blog"},A("projects",[{...p("persephone",`personal webpage, vibecoded from scratch.
i don't know any frontend`),link:"https://github.com/xdsai/persephone"}]),A("socials",[{...p("github","my github profile"),link:"https://github.com/xdsai"},{...p("linkedin","my linkedin profile"),link:"https://www.linkedin.com/in/jndl/"},{...p("email","email me something nice! no nigerian princes please"),link:"mailto:alex@jndl.dev"}])])]),A("tmp")]),cwd:"/home/alex"}}function ce(t){if(!t)return"/";let n=t.replace(/\\/g,"/");n.startsWith("/")||(n="/"+n);const r=[];for(const s of n.split("/"))!s||s==="."||(s===".."?r.pop():r.push(s));return"/"+r.join("/")}function $(t,n){return!n||n==="."?ce(t):n.startsWith("/")?ce(n):ce(t+"/"+n)}function C(t,n){const r=ce(n).split("/").filter(Boolean);if(r.length===0)return{node:t,parent:null};let s=t,o=null,d=t;for(const v of r){if(!s)return{node:null,parent:null};const h=s.children.find(b=>b.name===v)||null;if(o=s,d=h,!h)return{node:null,parent:o};s=h.type==="dir"?h:null}return{node:d,parent:o}}function he(t,n,r=!1){const s=ce(n);if(s==="/")return{node:t,created:!1};const o=s.split("/").filter(Boolean);let d=t,v=!1;for(const h of o){let b=d.children.find(S=>S.name===h);if(!b){if(!r)return{node:null,created:v};b=A(h),d.children.push(b),v=!0}if(b.type!=="dir")return{node:null,created:v};d=b}return{node:d,created:v}}function Je(t,n,r=!1){const{node:s,parent:o}=C(t,n);if(!s||!o||s.type==="dir"&&s.children.length&&!r)return!1;const d=o.children.findIndex(v=>v.name===s.name);return d>=0&&o.children.splice(d,1),!0}function xe(t,n,r){const s=t.slice();return s[34]=n[r],s}function Ae(t){let n,r=t[34].html+"";return{c(){n=j("div"),this.h()},l(s){n=N(s,"DIV",{class:!0});var o=P(n);o.forEach(E),this.h()},h(){w(n,"class","row svelte-xrnlp5")},m(s,o){Se(s,n,o),n.innerHTML=r},p(s,o){o[0]&32&&r!==(r=s[34].html+"")&&(n.innerHTML=r)},d(s){s&&E(n)}}}function qe(t){let n,r,s,o,d,v,h,b,S,ee,Q,J,O=ye(t[0].cwd)+"",q,te,T,ne,W,R,re,D,Y,M,B,Z,se,x,oe,ue,H=t[5],_=[];for(let g=0;g<H.length;g+=1)_[g]=Ae(xe(t,H,g));return{c(){n=j("div"),r=j("div"),s=j("div"),o=j("span"),d=j("span"),v=j("span"),h=le(),b=j("span"),S=L(G),ee=L("@"),Q=L(ge),J=L(" — "),q=L(O),te=le(),T=j("span"),ne=L("up "),W=L(t[4]),R=L(" min"),re=le(),D=j("div");for(let g=0;g<_.length;g+=1)_[g].c();Y=le(),M=j("div"),B=j("span"),Z=L(t[6]),se=le(),x=j("input"),this.h()},l(g){n=N(g,"DIV",{class:!0,tabindex:!0,role:!0,"aria-label":!0});var I=P(n);r=N(I,"DIV",{class:!0});var m=P(r);s=N(m,"DIV",{class:!0});var K=P(s);o=N(K,"SPAN",{class:!0}),P(o).forEach(E),d=N(K,"SPAN",{class:!0}),P(d).forEach(E),v=N(K,"SPAN",{class:!0}),P(v).forEach(E),K.forEach(E),h=ae(m),b=N(m,"SPAN",{class:!0});var F=P(b);S=V(F,G),ee=V(F,"@"),Q=V(F,ge),J=V(F," — "),q=V(F,O),F.forEach(E),te=ae(m),T=N(m,"SPAN",{class:!0});var e=P(T);ne=V(e,"up "),W=V(e,t[4]),R=V(e," min"),e.forEach(E),m.forEach(E),re=ae(I),D=N(I,"DIV",{class:!0});var i=P(D);for(let u=0;u<_.length;u+=1)_[u].l(i);Y=ae(i),M=N(i,"DIV",{class:!0});var c=P(M);B=N(c,"SPAN",{class:!0,"aria-hidden":!0});var l=P(B);Z=V(l,t[6]),l.forEach(E),se=ae(c),x=N(c,"INPUT",{class:!0,type:!0,spellcheck:!0,autocapitalize:!0,autocomplete:!0,autocorrect:!0}),c.forEach(E),i.forEach(E),I.forEach(E),this.h()},h(){w(o,"class","dot r svelte-xrnlp5"),w(d,"class","dot y svelte-xrnlp5"),w(v,"class","dot g svelte-xrnlp5"),w(s,"class","controls svelte-xrnlp5"),w(b,"class","title svelte-xrnlp5"),w(T,"class","uptime svelte-xrnlp5"),w(r,"class","titlebar svelte-xrnlp5"),w(B,"class","prompt svelte-xrnlp5"),w(B,"aria-hidden","true"),w(x,"class","readline svelte-xrnlp5"),w(x,"type","text"),w(x,"spellcheck","false"),w(x,"autocapitalize","off"),w(x,"autocomplete","off"),w(x,"autocorrect","off"),w(M,"class","row input svelte-xrnlp5"),w(D,"class","terminal svelte-xrnlp5"),w(n,"class","terminal-wrap svelte-xrnlp5"),w(n,"tabindex","0"),w(n,"role","group"),w(n,"aria-label","web terminal")},m(g,I){Se(g,n,I),y(n,r),y(r,s),y(s,o),y(s,d),y(s,v),y(r,h),y(r,b),y(b,S),y(b,ee),y(b,Q),y(b,J),y(b,q),y(r,te),y(r,T),y(T,ne),y(T,W),y(T,R),y(n,re),y(n,D);for(let m=0;m<_.length;m+=1)_[m]&&_[m].m(D,null);y(D,Y),y(D,M),y(M,B),y(B,Z),y(M,se),y(M,x),t[11](x),we(x,t[3]),t[13](D),oe||(ue=[X(x,"input",t[12]),X(x,"keydown",t[8]),X(D,"click",t[9]),X(D,"keydown",t[10]),X(n,"click",t[7]),X(n,"keydown",t[14])],oe=!0)},p(g,I){if(I[0]&1&&O!==(O=ye(g[0].cwd)+"")&&pe(q,O),I[0]&16&&pe(W,g[4]),I[0]&32){H=g[5];let m;for(m=0;m<H.length;m+=1){const K=xe(g,H,m);_[m]?_[m].p(K,I):(_[m]=Ae(K),_[m].c(),_[m].m(D,Y))}for(;m<_.length;m+=1)_[m].d(1);_.length=H.length}I[0]&64&&pe(Z,g[6]),I[0]&8&&x.value!==g[3]&&we(x,g[3])},i:me,o:me,d(g){g&&E(n),Ne(_,g),t[11](null),t[13](null),oe=!1,Te(ue)}}}let ge="jndl",G="alex";function ye(t){const n="/home/"+G;return t===n?"~":t.startsWith(n+"/")?"~"+t.slice(n.length):t}function Re(t){const n=[];let r="",s=!1;for(let o=0;o<t.length;o++){const d=t[o];if(d==='"'){s=!s;continue}if(!s&&/\s/.test(d)){r&&(n.push(r),r="");continue}r+=d}return r&&n.push(r),n}function U(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ue(t){return t==="~"||t.startsWith("~/")?"/home/"+G+(t.length>1?t.slice(1):""):t}function Ge(t){if(!t.length)return"";let n=t[0];for(const r of t.slice(1)){let s=0;for(;s<n.length&&s<r.length&&n[s]===r[s];)s++;if(n=n.slice(0,s),!n)break}return n}function*je(t,n){for(const r of t.children){const s=r.type==="dir";yield`${n}${r.name}${s?"/":""}`,s&&(yield*je(r,n+"  "))}}function Qe(t,n,r){let s,o=_e(),d,v,h="",b=[],S=-1;const ee=new Date;let Q=0,J=null,O=[];const q={help:"help — list available commands",ls:"ls [path] — list directory contents (click names to open)",tree:"tree [path] — show directory tree",pwd:"pwd — print working directory",cd:"cd <path> — change directory",cat:"cat <file> — print file to terminal",echo:'echo "text" > file — write or append with >>',touch:"touch <file> — create an empty file",mkdir:"mkdir [-p] <dir> — create directory",rm:"rm [-r] <path> — remove file or directory",clear:"clear — clear the screen",whoami:"whoami — print current user",date:"date — print current date/time",uname:"uname — print kernel info",ip:"ip — print public IP address",man:"man <cmd> — show a short description",resetfs:"resetfs — reset filesystem to defaults (clears local storage)"};function te(){const e=Fe();if(e)r(0,o=e);else{const{node:i}=C(o.root,"/home/"+G);i&&i.type==="dir"&&(i.children.push(A("notes")),i.children.push(p("todo.txt",`- replace this with greatness
`)),fe(o))}W('<span class="g">Welcome</span> — type <span class="y">help</span> to get started.'),W(`<div class="onboard">Quick start:
      <a href="#" class="cmd" data-cmd="ls">list files</a>
      · <a href="/blog" class="nav">blog</a>
      <div class="hint">Tip: use <b>ls</b> to list, <b>cat &lt;file&gt;</b> to read, <b>cd &lt;dir&gt;</b> to open</div>
    </div>`)}function T(){v==null||v.focus()}function ne(){d==null||d.scrollTo({top:d.scrollHeight})}function W(e){r(5,O=[...O,{html:e}]),Oe().then(ne)}async function R(e){const i=e.trim();if(W(`<span class="cmdline"><span class="prompt">${U(s)}</span> <span class="cmdtext">${U(e)}</span></span>`),!i)return;b.push(e),S=b.length;const[c,...l]=Re(i),u=[],a=(f,k=!1)=>u.push({text:f,raw:k});try{switch(c){case"help":a(Object.keys(q).join(", "));break;case"pwd":a(o.cwd);break;case"whoami":a(G);break;case"date":a(new Date().toString());break;case"uname":a("Linux persephone 6.1.0 x86_64 (web)");break;case"ip":{try{const k=await(await fetch("https://api.ipify.org?format=json",{cache:"no-store"})).json();a(`public: ${k.ip}`)}catch{a("ip: unable to fetch external IP")}break}case"clear":r(5,O=[]);break;case"cd":Y(l,a);break;case"ls":M(l,a);break;case"tree":B(l,a);break;case"cat":Z(l,a);break;case"echo":se(l,a);break;case"touch":x(l,a);break;case"mkdir":oe(l,a);break;case"rm":ue(l,a);break;case"resetfs":{Ve(),r(0,o=_e()),fe(o),a("filesystem reset to defaults");break}case"man":{const f=l[0];if(!f){a("man: missing command");break}const k=q[f];a(k||`No manual entry for ${f}`);break}default:a(`${c}: command not found`)}}catch(f){a(String(f))}if(u.length){const f=u.map(k=>k.raw?k.text:U(k.text)).join(`
`);W(f)}fe(o)}function re(e){const i=Ue(e),c=i.startsWith("/")?i:$(o.cwd,i),l=c.endsWith("/"),u=l?c:c.substring(0,c.lastIndexOf("/")>=0?c.lastIndexOf("/"):0),a=l?"":c.split("/").pop()||"",f=C(o.root,u||"/").node;if(!f||f.type!=="dir")return{next:null,suggestions:[]};const z=f.children.map(ie=>ie.type==="dir"?ie.name+"/":ie.name).filter(ie=>ie.startsWith(a));if(z.length===0)return{next:null,suggestions:[]};if(z.length===1)return{next:l?c:u+"/"+z[0],suggestions:z};const ke=Ge(z);return ke.length>a.length?{next:u+"/"+ke,suggestions:z}:{next:null,suggestions:z}}function D(){let e=!1,i=-1;for(let f=0;f<h.length;f++){const k=h[f];k==='"'&&(e=!e),!e&&/\s/.test(k)&&(i=f)}const c=h.slice(0,i+1),l=h.slice(i+1);if(!l)return;const{next:u,suggestions:a}=re(l);if(u){const f=u.startsWith(o.cwd)?u.replace(o.cwd,"").replace(/^\//,""):u;r(3,h=c+f);return}a.length&&W(a.join("  "))}function Y(e,i){const c=$(o.cwd,e[0]??"/"),l=C(o.root,c);if(!l.node)return i(`cd: no such file or directory: ${e[0]??"/"}`);if(l.node.type!=="dir")return i(`cd: not a directory: ${e[0]}`);r(0,o.cwd=c,o)}function M(e,i){const c=$(o.cwd,e[0]??"."),{node:l}=C(o.root,c);if(!l)return i(`ls: cannot access '${e[0]??"."}': No such file or directory`);if(l.type==="file")return i(l.name);$("/",c);const u=l.children.map(a=>{const f=a.type==="dir"?a.name+"/":a.name;if(a.type==="dir")return U(f);const k=a;return k.link?`<a href="${k.link}" class="nav">${U(f)}</a>`:U(f)}).join("  ");i(u,!0)}function B(e,i){const c=$(o.cwd,e[0]??"."),{node:l}=C(o.root,c);if(!l)return i(`tree: ${e[0]??"."}: No such file or directory`);if(l.type==="file")return i(l.name);i(l.name||"/"),i([...je(l,"  ")].join(`
`))}function Z(e,i){if(!e[0])return i("cat: missing file operand");const c=$(o.cwd,e[0]),{node:l}=C(o.root,c);if(!l)return i(`cat: ${e[0]}: No such file or directory`);if(l.type!=="file")return i(`cat: ${e[0]}: Is a directory`);i(l.content)}function se(e,i){const c=e.findIndex(l=>l===">"||l===">>");if(c>=0){const l=e.slice(0,c).join(" "),u=e[c]===">>",a=e[c+1];if(!a)return i("echo: redirection needs a file");const f=$(o.cwd,a),k=C(o.root,f);if(!k.node){const z=he(o.root,f.substring(0,f.lastIndexOf("/")),!0).node;if(!z)return i(`echo: cannot create file '${a}'`);z.children.push(p(f.split("/").pop()||"file.txt",l+(u?"":`
`))),fe(o);return}if(k.node.type!=="file")return i(`echo: ${a}: Is a directory`);k.node.content=u?k.node.content+l:l+`
`,k.node.updatedAt=de();return}i(e.join(" "))}function x(e,i){if(!e[0])return i("touch: missing file operand");const c=$(o.cwd,e[0]),l=C(o.root,c);if(!l.node){const u=c.substring(0,c.lastIndexOf("/"))||"/",{node:a}=he(o.root,u,!0);if(!a)return i(`touch: cannot create '${e[0]}'`);a.children.push(p(c.split("/").pop()||"file.txt",""));return}if(l.node.type!=="file")return i(`touch: ${e[0]}: Is a directory`);l.node.updatedAt=de()}function oe(e,i){if(!e[0])return i("mkdir: missing operand");const c=e[0]==="-p",l=c?e[1]:e[0];if(!l)return i("mkdir: missing operand");const u=$(o.cwd,l);if(!he(o.root,u,c).node)return i(`mkdir: cannot create directory '${l}'`)}function ue(e,i){if(!e[0])return i("rm: missing operand");const c=e[0]==="-r",l=c?e[1]:e[0],u=$(o.cwd,l);Je(o.root,u,c)||i(`rm: cannot remove '${l}'`)}function H(e){if(e.key==="Enter"){e.preventDefault();const i=h;r(3,h=""),R(i)}else e.key==="ArrowUp"?(S>0&&(S-=1,r(3,h=b[S]??"")),e.preventDefault()):e.key==="ArrowDown"?(S<b.length&&(S+=1,r(3,h=b[S]??"")),e.preventDefault()):e.key==="c"&&(e.ctrlKey||e.metaKey)?(W('<span class="prompt">'+s+"</span> "+U(h)),r(3,h=""),e.preventDefault()):e.key==="Tab"&&(e.preventDefault(),D())}function _(e){const i=e.target,c=i.closest("a.cmd");if(c){e.preventDefault();const u=c.getAttribute("data-cmd")||"";u&&R(u);return}const l=i.closest("a.nav");if(l){e.preventDefault();const u=l.getAttribute("href")||"";u&&(window.location.href=u)}}function g(e){const i=e.target;if(!(e.key==="Enter"||e.key===" "))return;const l=i.closest("a.cmd"),u=i.closest("a.nav");if(l){e.preventDefault();const a=l.getAttribute("data-cmd")||"";a&&R(a);return}if(u){e.preventDefault();const a=u.getAttribute("href")||"";a&&(window.location.href=a)}}Pe(()=>{te(),T();const e=()=>{r(4,Q=Math.floor((Date.now()-ee.getTime())/6e4))};e(),J=setInterval(e,1e4)}),We(()=>{J&&clearInterval(J)});function I(e){ve[e?"unshift":"push"](()=>{v=e,r(2,v)})}function m(){h=this.value,r(3,h)}function K(e){ve[e?"unshift":"push"](()=>{d=e,r(1,d)})}const F=e=>{(e.key.length===1||e.key==="/"||e.key===" ")&&T()};return t.$$.update=()=>{t.$$.dirty[0]&1&&r(6,s=`${G}@${ge}:${ye(o.cwd)}$`)},[o,d,v,h,Q,O,s,T,H,_,g,I,m,K,F]}class Ye extends Ie{constructor(n){super(),De(this,n,Qe,qe,Ee,{},null,[-1,-1])}}function Ze(t){let n,r;return n=new Ye({}),{c(){Me(n.$$.fragment)},l(s){ze(n.$$.fragment,s)},m(s,o){$e(n,s,o),r=!0},p:me,i(s){r||(Be(n.$$.fragment,s),r=!0)},o(s){Ke(n.$$.fragment,s),r=!1},d(s){Le(n,s)}}}class et extends Ie{constructor(n){super(),De(this,n,null,Ze,Ee,{})}}export{et as default};
