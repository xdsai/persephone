import{S as De,i as Ie,s as Ee,k as j,a as ae,q as L,l as N,m as P,h as E,c as le,r as V,n as w,b as Se,G as y,J as we,K as Z,u as pe,H as me,L as Ne,M as Te,o as Pe,N as We,t as Oe,w as ve,y as Me,z as ze,A as $e,g as Be,d as Ke,B as Le}from"../chunks/index.17bb44e0.js";const be="persephone.fs.v1";function Ve(){try{localStorage.removeItem(be)}catch{}}function de(){return Date.now()}function A(t,n=[]){const r=de();return{name:t,type:"dir",children:n,createdAt:r,updatedAt:r}}function m(t,n=""){const r=de();return{name:t,type:"file",content:n,createdAt:r,updatedAt:r}}function Ce(t){return JSON.stringify(t)}function He(t){try{return JSON.parse(t)}catch{return null}}function fe(t){try{localStorage.setItem(be,Ce(t))}catch{}}function Fe(){try{const t=localStorage.getItem(be);return t?He(t):null}catch{return null}}function _e(){return{root:A("/",[A("bin",[m("ls",""),m("cat",""),m("echo",""),m("pwd",""),m("cd",""),m("ip","")]),A("usr",[A("bin",[m("node",""),m("bash","")]),A("share",[m("dict.txt","why are you looking here >:(")])]),A("var",[A("log",[m("auth.log","accepted connection"),m("kern.log","boot ok")]),A("tmp")]),A("proc",[m("cpuinfo","cpu: webasm"),m("meminfo","mem: virtual")]),A("etc",[m("hostname",`jndl
`),m("hosts",`127.0.0.1 localhost
::1 localhost
`),m("os-release",`NAME=Web
ID=web`)]),A("home",[A("alex",[m("README.md",`# Alexander Jandl

Welcome to my terminal. Try \`help\` to see commands.

Useful places:
- ~/about.txt
- ~/skills.md
- ~/projects
`),m("about.txt","Infrastructure & security focused engineer based in Bratislava. I like reliable automation, scalable systems, and cats."),m("skills.md",`- Linux, networking, network security
- AWS & Azure platform security
- Scripting: Bash, Python, Powershell, C
- Zero-trust, identity, and least privilege`),{...m("blog","Open the personal blog"),link:"/blog"},A("projects",[{...m("persephone",`personal webpage, vibecoded from scratch.
i don't know any frontend :D`),link:"https://github.com/xdsai/persephone"}]),A("socials",[{...m("github","my github profile"),link:"https://github.com/xdsai"},{...m("linkedin","my linkedin profile"),link:"https://www.linkedin.com/in/jndl/"},{...m("email","email me something nice! no nigerian princes please"),link:"mailto:alex@jndl.dev"}])])]),A("tmp")]),cwd:"/home/alex"}}function ce(t){if(!t)return"/";let n=t.replace(/\\/g,"/");n.startsWith("/")||(n="/"+n);const r=[];for(const s of n.split("/"))!s||s==="."||(s===".."?r.pop():r.push(s));return"/"+r.join("/")}function $(t,n){return!n||n==="."?ce(t):n.startsWith("/")?ce(n):ce(t+"/"+n)}function F(t,n){const r=ce(n).split("/").filter(Boolean);if(r.length===0)return{node:t,parent:null};let s=t,o=null,d=t;for(const v of r){if(!s)return{node:null,parent:null};const p=s.children.find(b=>b.name===v)||null;if(o=s,d=p,!p)return{node:null,parent:o};s=p.type==="dir"?p:null}return{node:d,parent:o}}function he(t,n,r=!1){const s=ce(n);if(s==="/")return{node:t,created:!1};const o=s.split("/").filter(Boolean);let d=t,v=!1;for(const p of o){let b=d.children.find(S=>S.name===p);if(!b){if(!r)return{node:null,created:v};b=A(p),d.children.push(b),v=!0}if(b.type!=="dir")return{node:null,created:v};d=b}return{node:d,created:v}}function Je(t,n,r=!1){const{node:s,parent:o}=F(t,n);if(!s||!o||s.type==="dir"&&s.children.length&&!r)return!1;const d=o.children.findIndex(v=>v.name===s.name);return d>=0&&o.children.splice(d,1),!0}function xe(t,n,r){const s=t.slice();return s[34]=n[r],s}function Ae(t){let n,r=t[34].html+"";return{c(){n=j("div"),this.h()},l(s){n=N(s,"DIV",{class:!0});var o=P(n);o.forEach(E),this.h()},h(){w(n,"class","row svelte-1o8s9me")},m(s,o){Se(s,n,o),n.innerHTML=r},p(s,o){o[0]&32&&r!==(r=s[34].html+"")&&(n.innerHTML=r)},d(s){s&&E(n)}}}function qe(t){let n,r,s,o,d,v,p,b,S,ee,G,J,O=ye(t[0].cwd)+"",q,te,T,ne,W,R,re,I,Q,M,B,Y,se,x,oe,ue,C=t[5],_=[];for(let g=0;g<C.length;g+=1)_[g]=Ae(xe(t,C,g));return{c(){n=j("div"),r=j("div"),s=j("div"),o=j("span"),d=j("span"),v=j("span"),p=ae(),b=j("span"),S=L(X),ee=L("@"),G=L(ge),J=L(" — "),q=L(O),te=ae(),T=j("span"),ne=L("up "),W=L(t[4]),R=L(" min"),re=ae(),I=j("div");for(let g=0;g<_.length;g+=1)_[g].c();Q=ae(),M=j("div"),B=j("span"),Y=L(t[6]),se=ae(),x=j("input"),this.h()},l(g){n=N(g,"DIV",{class:!0,tabindex:!0,role:!0,"aria-label":!0});var D=P(n);r=N(D,"DIV",{class:!0});var h=P(r);s=N(h,"DIV",{class:!0});var K=P(s);o=N(K,"SPAN",{class:!0}),P(o).forEach(E),d=N(K,"SPAN",{class:!0}),P(d).forEach(E),v=N(K,"SPAN",{class:!0}),P(v).forEach(E),K.forEach(E),p=le(h),b=N(h,"SPAN",{class:!0});var H=P(b);S=V(H,X),ee=V(H,"@"),G=V(H,ge),J=V(H," — "),q=V(H,O),H.forEach(E),te=le(h),T=N(h,"SPAN",{class:!0});var e=P(T);ne=V(e,"up "),W=V(e,t[4]),R=V(e," min"),e.forEach(E),h.forEach(E),re=le(D),I=N(D,"DIV",{class:!0});var a=P(I);for(let u=0;u<_.length;u+=1)_[u].l(a);Q=le(a),M=N(a,"DIV",{class:!0});var c=P(M);B=N(c,"SPAN",{class:!0,"aria-hidden":!0});var i=P(B);Y=V(i,t[6]),i.forEach(E),se=le(c),x=N(c,"INPUT",{class:!0,type:!0,spellcheck:!0,autocapitalize:!0,autocomplete:!0,autocorrect:!0}),c.forEach(E),a.forEach(E),D.forEach(E),this.h()},h(){w(o,"class","dot r svelte-1o8s9me"),w(d,"class","dot y svelte-1o8s9me"),w(v,"class","dot g svelte-1o8s9me"),w(s,"class","controls svelte-1o8s9me"),w(b,"class","title svelte-1o8s9me"),w(T,"class","uptime svelte-1o8s9me"),w(r,"class","titlebar svelte-1o8s9me"),w(B,"class","prompt svelte-1o8s9me"),w(B,"aria-hidden","true"),w(x,"class","readline svelte-1o8s9me"),w(x,"type","text"),w(x,"spellcheck","false"),w(x,"autocapitalize","off"),w(x,"autocomplete","off"),w(x,"autocorrect","off"),w(M,"class","row input svelte-1o8s9me"),w(I,"class","terminal svelte-1o8s9me"),w(n,"class","terminal-wrap svelte-1o8s9me"),w(n,"tabindex","0"),w(n,"role","group"),w(n,"aria-label","web terminal")},m(g,D){Se(g,n,D),y(n,r),y(r,s),y(s,o),y(s,d),y(s,v),y(r,p),y(r,b),y(b,S),y(b,ee),y(b,G),y(b,J),y(b,q),y(r,te),y(r,T),y(T,ne),y(T,W),y(T,R),y(n,re),y(n,I);for(let h=0;h<_.length;h+=1)_[h]&&_[h].m(I,null);y(I,Q),y(I,M),y(M,B),y(B,Y),y(M,se),y(M,x),t[11](x),we(x,t[3]),t[13](I),oe||(ue=[Z(x,"input",t[12]),Z(x,"keydown",t[8]),Z(I,"click",t[9]),Z(I,"keydown",t[10]),Z(n,"click",t[7]),Z(n,"keydown",t[14])],oe=!0)},p(g,D){if(D[0]&1&&O!==(O=ye(g[0].cwd)+"")&&pe(q,O),D[0]&16&&pe(W,g[4]),D[0]&32){C=g[5];let h;for(h=0;h<C.length;h+=1){const K=xe(g,C,h);_[h]?_[h].p(K,D):(_[h]=Ae(K),_[h].c(),_[h].m(I,Q))}for(;h<_.length;h+=1)_[h].d(1);_.length=C.length}D[0]&64&&pe(Y,g[6]),D[0]&8&&x.value!==g[3]&&we(x,g[3])},i:me,o:me,d(g){g&&E(n),Ne(_,g),t[11](null),t[13](null),oe=!1,Te(ue)}}}let ge="jndl",X="alex";function ye(t){const n="/home/"+X;return t===n?"~":t.startsWith(n+"/")?"~"+t.slice(n.length):t}function Re(t){const n=[];let r="",s=!1;for(let o=0;o<t.length;o++){const d=t[o];if(d==='"'){s=!s;continue}if(!s&&/\s/.test(d)){r&&(n.push(r),r="");continue}r+=d}return r&&n.push(r),n}function U(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ue(t){return t==="~"||t.startsWith("~/")?"/home/"+X+(t.length>1?t.slice(1):""):t}function Ge(t){if(!t.length)return"";let n=t[0];for(const r of t.slice(1)){let s=0;for(;s<n.length&&s<r.length&&n[s]===r[s];)s++;if(n=n.slice(0,s),!n)break}return n}function*je(t,n){for(const r of t.children){const s=r.type==="dir";yield`${n}${r.name}${s?"/":""}`,s&&(yield*je(r,n+"  "))}}function Qe(t,n,r){let s,o=_e(),d,v,p="",b=[],S=-1;const ee=new Date;let G=0,J=null,O=[];const q={help:"help — list available commands",ls:"ls [path] — list directory contents (click names to open)",tree:"tree [path] — show directory tree",pwd:"pwd — print working directory",cd:"cd <path> — change directory",cat:"cat <file> — print file to terminal",echo:'echo "text" > file — write or append with >>',touch:"touch <file> — create an empty file",mkdir:"mkdir [-p] <dir> — create directory",rm:"rm [-r] <path> — remove file or directory",clear:"clear — clear the screen",whoami:"whoami — print current user",date:"date — print current date/time",uname:"uname — print kernel info",ip:"ip — print public IP address",man:"man <cmd> — show a short description",resetfs:"resetfs — reset filesystem to defaults (clears local storage)"};function te(){const e=Fe();e?r(0,o=e):fe(o),W('<span class="g">Welcome</span> — type <span class="y">help</span> to get started.'),W(`<div class="onboard">Quick start:
      <a href="#" class="cmd" data-cmd="ls">list files</a>
      · <a href="/blog" class="nav">blog</a>
      <div class="hint">Tip: use <b>ls</b> to list, <b>cat &lt;file&gt;</b> to read, <b>cd &lt;dir&gt;</b> to open</div>
    </div>`)}function T(){v==null||v.focus()}function ne(){d==null||d.scrollTo({top:d.scrollHeight})}function W(e){r(5,O=[...O,{html:e}]),Oe().then(ne)}async function R(e){const a=e.trim();if(W(`<span class="cmdline"><span class="prompt">${U(s)}</span> <span class="cmdtext">${U(e)}</span></span>`),!a)return;b.push(e),S=b.length;const[c,...i]=Re(a),u=[],l=(f,k=!1)=>u.push({text:f,raw:k});try{switch(c){case"help":l(Object.keys(q).join(", "));break;case"pwd":l(o.cwd);break;case"whoami":l(X);break;case"date":l(new Date().toString());break;case"uname":l("Linux persephone 6.1.0 x86_64 (web)");break;case"ip":{try{const k=await(await fetch("https://api.ipify.org?format=json",{cache:"no-store"})).json();l(`public: ${k.ip}`)}catch{l("ip: unable to fetch external IP")}break}case"clear":r(5,O=[]);break;case"cd":Q(i,l);break;case"ls":M(i,l);break;case"tree":B(i,l);break;case"cat":Y(i,l);break;case"echo":se(i,l);break;case"touch":x(i,l);break;case"mkdir":oe(i,l);break;case"rm":ue(i,l);break;case"resetfs":{Ve(),r(0,o=_e()),fe(o),l("filesystem reset to defaults");break}case"man":{const f=i[0];if(!f){l("man: missing command");break}const k=q[f];l(k||`No manual entry for ${f}`);break}default:l(`${c}: command not found`)}}catch(f){l(String(f))}if(u.length){const f=u.map(k=>k.raw?k.text:U(k.text)).join(`
`);W(f)}fe(o)}function re(e){const a=Ue(e),c=a.startsWith("/")?a:$(o.cwd,a),i=c.endsWith("/"),u=i?c:c.substring(0,c.lastIndexOf("/")>=0?c.lastIndexOf("/"):0),l=i?"":c.split("/").pop()||"",f=F(o.root,u||"/").node;if(!f||f.type!=="dir")return{next:null,suggestions:[]};const z=f.children.map(ie=>ie.type==="dir"?ie.name+"/":ie.name).filter(ie=>ie.startsWith(l));if(z.length===0)return{next:null,suggestions:[]};if(z.length===1)return{next:i?c:u+"/"+z[0],suggestions:z};const ke=Ge(z);return ke.length>l.length?{next:u+"/"+ke,suggestions:z}:{next:null,suggestions:z}}function I(){let e=!1,a=-1;for(let f=0;f<p.length;f++){const k=p[f];k==='"'&&(e=!e),!e&&/\s/.test(k)&&(a=f)}const c=p.slice(0,a+1),i=p.slice(a+1);if(!i)return;const{next:u,suggestions:l}=re(i);if(u){const f=u.startsWith(o.cwd)?u.replace(o.cwd,"").replace(/^\//,""):u;r(3,p=c+f);return}l.length&&W(l.join("  "))}function Q(e,a){const c=$(o.cwd,e[0]??"/"),i=F(o.root,c);if(!i.node)return a(`cd: no such file or directory: ${e[0]??"/"}`);if(i.node.type!=="dir")return a(`cd: not a directory: ${e[0]}`);r(0,o.cwd=c,o)}function M(e,a){const c=$(o.cwd,e[0]??"."),{node:i}=F(o.root,c);if(!i)return a(`ls: cannot access '${e[0]??"."}': No such file or directory`);if(i.type==="file")return a(i.name);$("/",c);const u=i.children.map(l=>{const f=l.type==="dir"?l.name+"/":l.name;if(l.type==="dir")return U(f);const k=l;return k.link?`<a href="${k.link}" class="nav">${U(f)}</a>`:U(f)}).join("  ");a(u,!0)}function B(e,a){const c=$(o.cwd,e[0]??"."),{node:i}=F(o.root,c);if(!i)return a(`tree: ${e[0]??"."}: No such file or directory`);if(i.type==="file")return a(i.name);a(i.name||"/"),a([...je(i,"  ")].join(`
`))}function Y(e,a){if(!e[0])return a("cat: missing file operand");const c=$(o.cwd,e[0]),{node:i}=F(o.root,c);if(!i)return a(`cat: ${e[0]}: No such file or directory`);if(i.type!=="file")return a(`cat: ${e[0]}: Is a directory`);a(i.content)}function se(e,a){const c=e.findIndex(i=>i===">"||i===">>");if(c>=0){const i=e.slice(0,c).join(" "),u=e[c]===">>",l=e[c+1];if(!l)return a("echo: redirection needs a file");const f=$(o.cwd,l),k=F(o.root,f);if(!k.node){const z=he(o.root,f.substring(0,f.lastIndexOf("/")),!0).node;if(!z)return a(`echo: cannot create file '${l}'`);z.children.push(m(f.split("/").pop()||"file.txt",i+(u?"":`
`))),fe(o);return}if(k.node.type!=="file")return a(`echo: ${l}: Is a directory`);k.node.content=u?k.node.content+i:i+`
`,k.node.updatedAt=de();return}a(e.join(" "))}function x(e,a){if(!e[0])return a("touch: missing file operand");const c=$(o.cwd,e[0]),i=F(o.root,c);if(!i.node){const u=c.substring(0,c.lastIndexOf("/"))||"/",{node:l}=he(o.root,u,!0);if(!l)return a(`touch: cannot create '${e[0]}'`);l.children.push(m(c.split("/").pop()||"file.txt",""));return}if(i.node.type!=="file")return a(`touch: ${e[0]}: Is a directory`);i.node.updatedAt=de()}function oe(e,a){if(!e[0])return a("mkdir: missing operand");const c=e[0]==="-p",i=c?e[1]:e[0];if(!i)return a("mkdir: missing operand");const u=$(o.cwd,i);if(!he(o.root,u,c).node)return a(`mkdir: cannot create directory '${i}'`)}function ue(e,a){if(!e[0])return a("rm: missing operand");const c=e[0]==="-r",i=c?e[1]:e[0],u=$(o.cwd,i);Je(o.root,u,c)||a(`rm: cannot remove '${i}'`)}function C(e){if(e.key==="Enter"){e.preventDefault();const a=p;r(3,p=""),R(a)}else e.key==="ArrowUp"?(S>0&&(S-=1,r(3,p=b[S]??"")),e.preventDefault()):e.key==="ArrowDown"?(S<b.length&&(S+=1,r(3,p=b[S]??"")),e.preventDefault()):e.key==="c"&&(e.ctrlKey||e.metaKey)?(W('<span class="prompt">'+s+"</span> "+U(p)),r(3,p=""),e.preventDefault()):e.key==="Tab"&&(e.preventDefault(),I())}function _(e){const a=e.target,c=a.closest("a.cmd");if(c){e.preventDefault();const u=c.getAttribute("data-cmd")||"";u&&R(u);return}const i=a.closest("a.nav");if(i){e.preventDefault();const u=i.getAttribute("href")||"";u&&(window.location.href=u)}}function g(e){const a=e.target;if(!(e.key==="Enter"||e.key===" "))return;const i=a.closest("a.cmd"),u=a.closest("a.nav");if(i){e.preventDefault();const l=i.getAttribute("data-cmd")||"";l&&R(l);return}if(u){e.preventDefault();const l=u.getAttribute("href")||"";l&&(window.location.href=l)}}Pe(()=>{te(),T();const e=()=>{r(4,G=Math.floor((Date.now()-ee.getTime())/6e4))};e(),J=setInterval(e,1e4)}),We(()=>{J&&clearInterval(J)});function D(e){ve[e?"unshift":"push"](()=>{v=e,r(2,v)})}function h(){p=this.value,r(3,p)}function K(e){ve[e?"unshift":"push"](()=>{d=e,r(1,d)})}const H=e=>{(e.key.length===1||e.key==="/"||e.key===" ")&&T()};return t.$$.update=()=>{t.$$.dirty[0]&1&&r(6,s=`${X}@${ge}:${ye(o.cwd)}$`)},[o,d,v,p,G,O,s,T,C,_,g,D,h,K,H]}class Ye extends De{constructor(n){super(),Ie(this,n,Qe,qe,Ee,{},null,[-1,-1])}}function Ze(t){let n,r;return n=new Ye({}),{c(){Me(n.$$.fragment)},l(s){ze(n.$$.fragment,s)},m(s,o){$e(n,s,o),r=!0},p:me,i(s){r||(Be(n.$$.fragment,s),r=!0)},o(s){Ke(n.$$.fragment,s),r=!1},d(s){Le(n,s)}}}class et extends De{constructor(n){super(),Ie(this,n,null,Ze,Ee,{})}}export{et as default};
